var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(d){return d.raw=d};$jscomp.createTemplateTagFirstArgWithRaw=function(d,a){d.raw=a;return d};$jscomp.arrayIteratorImpl=function(d){var a=0;return function(){return a<d.length?{done:!1,value:d[a++]}:{done:!0}}};$jscomp.arrayIterator=function(d){return{next:$jscomp.arrayIteratorImpl(d)}};$jscomp.makeIterator=function(d){var a="undefined"!=typeof Symbol&&Symbol.iterator&&d[Symbol.iterator];return a?a.call(d):$jscomp.arrayIterator(d)};
$jscomp.findInternal=function(d,a,b){d instanceof String&&(d=String(d));for(var c=d.length,e=0;e<c;e++){var k=d[e];if(a.call(b,k,e,d))return{i:e,v:k}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(d,a,b){if(d==Array.prototype||d==Object.prototype)return d;d[a]=b.value;return d};$jscomp.getGlobal=function(d){d=["object"==typeof globalThis&&globalThis,d,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<d.length;++a){var b=d[a];if(b&&b.Math==Math)return b}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(d,a){var b=$jscomp.propertyToPolyfillSymbol[a];if(null==b)return d[a];b=d[b];return void 0!==b?b:d[a]};
$jscomp.polyfill=function(d,a,b,c){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(d,a,b,c):$jscomp.polyfillUnisolated(d,a,b,c))};$jscomp.polyfillUnisolated=function(d,a,b,c){b=$jscomp.global;d=d.split(".");for(c=0;c<d.length-1;c++){var e=d[c];if(!(e in b))return;b=b[e]}d=d[d.length-1];c=b[d];a=a(c);a!=c&&null!=a&&$jscomp.defineProperty(b,d,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(d,a,b,c){var e=d.split(".");d=1===e.length;c=e[0];c=!d&&c in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var k=0;k<e.length-1;k++){var f=e[k];if(!(f in c))return;c=c[f]}e=e[e.length-1];b=$jscomp.IS_SYMBOL_NATIVE&&"es6"===b?c[e]:null;a=a(b);null!=a&&(d?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:a}):a!==b&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(c,e,{configurable:!0,writable:!0,value:a})))};$jscomp.polyfill("Array.prototype.find",function(d){return d?d:function(a,b){return $jscomp.findInternal(this,a,b).v}},"es6","es3");$jscomp.polyfill("Object.is",function(d){return d?d:function(a,b){return a===b?0!==a||1/a===1/b:a!==a&&b!==b}},"es6","es3");
$jscomp.polyfill("Array.prototype.includes",function(d){return d?d:function(a,b){var c=this;c instanceof String&&(c=String(c));var e=c.length;b=b||0;for(0>b&&(b=Math.max(b+e,0));b<e;b++){var k=c[b];if(k===a||Object.is(k,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(d,a,b){if(null==d)throw new TypeError("The 'this' value for String.prototype."+b+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+b+" must not be a regular expression");return d+""};$jscomp.polyfill("String.prototype.includes",function(d){return d?d:function(a,b){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,b||0)}},"es6","es3");
$jscomp.polyfill("Array.from",function(d){return d?d:function(a,b,c){b=null!=b?b:function(m){return m};var e=[],k="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof k){a=k.call(a);for(var f=0;!(k=a.next()).done;)e.push(b.call(c,k.value,f++))}else for(k=a.length,f=0;f<k;f++)e.push(b.call(c,a[f],f));return e}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var d={},a=Object.create(new $jscomp.global.Proxy(d,{get:function(b,c,e){return b==d&&"q"==c&&e==a}}));return!0===a.q}catch(b){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.initSymbol=function(){};
$jscomp.polyfill("Symbol",function(d){if(d)return d;var a=function(e,k){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:k})};a.prototype.toString=function(){return this.$jscomp$symbol$id_};var b=0,c=function(e){if(this instanceof c)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+b++,e)};return c},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(d){if(d)return d;d=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<a.length;b++){var c=$jscomp.global[a[b]];"function"===typeof c&&"function"!=typeof c.prototype[d]&&$jscomp.defineProperty(c.prototype,d,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return d},"es6",
"es3");$jscomp.iteratorPrototype=function(d){d={next:d};d[Symbol.iterator]=function(){return this};return d};$jscomp.owns=function(d,a){return Object.prototype.hasOwnProperty.call(d,a)};
$jscomp.polyfill("WeakMap",function(d){function a(){if(!d||!Object.seal)return!1;try{var h=Object.seal({}),l=Object.seal({}),n=new d([[h,2],[l,3]]);if(2!=n.get(h)||3!=n.get(l))return!1;n.delete(h);n.set(l,4);return!n.has(h)&&4==n.get(l)}catch(p){return!1}}function b(){}function c(h){var l=typeof h;return"object"===l&&null!==h||"function"===l}function e(h){if(!$jscomp.owns(h,f)){var l=new b;$jscomp.defineProperty(h,f,{value:l})}}function k(h){if(!$jscomp.ISOLATE_POLYFILLS){var l=Object[h];l&&(Object[h]=
function(n){if(n instanceof b)return n;Object.isExtensible(n)&&e(n);return l(n)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(d&&$jscomp.ES6_CONFORMANCE)return d}else if(a())return d;var f="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var m=0,g=function(h){this.id_=(m+=Math.random()+1).toString();if(h){h=$jscomp.makeIterator(h);for(var l;!(l=h.next()).done;)l=l.value,this.set(l[0],l[1])}};g.prototype.set=function(h,l){if(!c(h))throw Error("Invalid WeakMap key");
e(h);if(!$jscomp.owns(h,f))throw Error("WeakMap key fail: "+h);h[f][this.id_]=l;return this};g.prototype.get=function(h){return c(h)&&$jscomp.owns(h,f)?h[f][this.id_]:void 0};g.prototype.has=function(h){return c(h)&&$jscomp.owns(h,f)&&$jscomp.owns(h[f],this.id_)};g.prototype.delete=function(h){return c(h)&&$jscomp.owns(h,f)&&$jscomp.owns(h[f],this.id_)?delete h[f][this.id_]:!1};return g},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(d){function a(){if($jscomp.ASSUME_NO_NATIVE_MAP||!d||"function"!=typeof d||!d.prototype.entries||"function"!=typeof Object.seal)return!1;try{var g=Object.seal({x:4}),h=new d($jscomp.makeIterator([[g,"s"]]));if("s"!=h.get(g)||1!=h.size||h.get({x:4})||h.set({x:4},"t")!=h||2!=h.size)return!1;var l=h.entries(),n=l.next();if(n.done||n.value[0]!=g||"s"!=n.value[1])return!1;n=l.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!l.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(d&&$jscomp.ES6_CONFORMANCE)return d}else if(a())return d;var b=new WeakMap,c=function(g){this.data_={};this.head_=f();this.size=0;if(g){g=$jscomp.makeIterator(g);for(var h;!(h=g.next()).done;)h=h.value,this.set(h[0],h[1])}};c.prototype.set=function(g,h){g=0===g?0:g;var l=e(this,g);l.list||(l.list=this.data_[l.id]=[]);l.entry?l.entry.value=h:(l.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:g,value:h},l.list.push(l.entry),
this.head_.previous.next=l.entry,this.head_.previous=l.entry,this.size++);return this};c.prototype.delete=function(g){g=e(this,g);return g.entry&&g.list?(g.list.splice(g.index,1),g.list.length||delete this.data_[g.id],g.entry.previous.next=g.entry.next,g.entry.next.previous=g.entry.previous,g.entry.head=null,this.size--,!0):!1};c.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};c.prototype.has=function(g){return!!e(this,g).entry};c.prototype.get=function(g){return(g=
e(this,g).entry)&&g.value};c.prototype.entries=function(){return k(this,function(g){return[g.key,g.value]})};c.prototype.keys=function(){return k(this,function(g){return g.key})};c.prototype.values=function(){return k(this,function(g){return g.value})};c.prototype.forEach=function(g,h){for(var l=this.entries(),n;!(n=l.next()).done;)n=n.value,g.call(h,n[1],n[0],this)};c.prototype[Symbol.iterator]=c.prototype.entries;var e=function(g,h){var l=h&&typeof h;"object"==l||"function"==l?b.has(h)?l=b.get(h):
(l=""+ ++m,b.set(h,l)):l="p_"+h;var n=g.data_[l];if(n&&$jscomp.owns(g.data_,l))for(g=0;g<n.length;g++){var p=n[g];if(h!==h&&p.key!==p.key||h===p.key)return{id:l,list:n,index:g,entry:p}}return{id:l,list:n,index:-1,entry:void 0}},k=function(g,h){var l=g.head_;return $jscomp.iteratorPrototype(function(){if(l){for(;l.head!=g.head_;)l=l.previous;for(;l.next!=l.head;)return l=l.next,{done:!1,value:h(l)};l=null}return{done:!0,value:void 0}})},f=function(){var g={};return g.previous=g.next=g.head=g},m=0;
return c},"es6","es3");
$jscomp.polyfill("Promise",function(d){function a(){this.batch_=null}function b(f){return f instanceof e?f:new e(function(m,g){m(f)})}if(d&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return d;a.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var m=this;this.asyncExecuteFunction(function(){m.executeBatch_()})}this.batch_.push(f)};
var c=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(f){c(f,0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=this.batch_;this.batch_=[];for(var m=0;m<f.length;++m){var g=f[m];f[m]=null;try{g()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};a.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var e=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var m=this.createResolveAndReject_();
try{f(m.resolve,m.reject)}catch(g){m.reject(g)}};e.prototype.createResolveAndReject_=function(){function f(h){return function(l){g||(g=!0,h.call(m,l))}}var m=this,g=!1;return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};e.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof e)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var m=null!=f;break a;case "function":m=!0;break a;default:m=!1}m?this.resolveToNonPromiseObj_(f):
this.fulfill_(f)}};e.prototype.resolveToNonPromiseObj_=function(f){var m=void 0;try{m=f.then}catch(g){this.reject_(g);return}"function"==typeof m?this.settleSameAsThenable_(m,f):this.fulfill_(f)};e.prototype.reject_=function(f){this.settle_(2,f)};e.prototype.fulfill_=function(f){this.settle_(1,f)};e.prototype.settle_=function(f,m){if(0!=this.state_)throw Error("Cannot settle("+f+", "+m+"): Promise already settled in state"+this.state_);this.state_=f;this.result_=m;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};e.prototype.scheduleUnhandledRejectionCheck_=function(){var f=this;c(function(){if(f.notifyUnhandledRejection_()){var m=$jscomp.global.console;"undefined"!==typeof m&&m.error(f.result_)}},1)};e.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var f=$jscomp.global.CustomEvent,m=$jscomp.global.Event,g=$jscomp.global.dispatchEvent;if("undefined"===typeof g)return!0;"function"===typeof f?f=new f("unhandledrejection",{cancelable:!0}):
"function"===typeof m?f=new m("unhandledrejection",{cancelable:!0}):(f=$jscomp.global.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f));f.promise=this;f.reason=this.result_;return g(f)};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=0;f<this.onSettledCallbacks_.length;++f)k.asyncExecute(this.onSettledCallbacks_[f]);this.onSettledCallbacks_=null}};var k=new a;e.prototype.settleSameAsPromise_=function(f){var m=this.createResolveAndReject_();
f.callWhenSettled_(m.resolve,m.reject)};e.prototype.settleSameAsThenable_=function(f,m){var g=this.createResolveAndReject_();try{f.call(m,g.resolve,g.reject)}catch(h){g.reject(h)}};e.prototype.then=function(f,m){function g(p,q){return"function"==typeof p?function(r){try{h(p(r))}catch(t){l(t)}}:q}var h,l,n=new e(function(p,q){h=p;l=q});this.callWhenSettled_(g(f,h),g(m,l));return n};e.prototype.catch=function(f){return this.then(void 0,f)};e.prototype.callWhenSettled_=function(f,m){function g(){switch(h.state_){case 1:f(h.result_);
break;case 2:m(h.result_);break;default:throw Error("Unexpected state: "+h.state_);}}var h=this;null==this.onSettledCallbacks_?k.asyncExecute(g):this.onSettledCallbacks_.push(g);this.isRejectionHandled_=!0};e.resolve=b;e.reject=function(f){return new e(function(m,g){g(f)})};e.race=function(f){return new e(function(m,g){for(var h=$jscomp.makeIterator(f),l=h.next();!l.done;l=h.next())b(l.value).callWhenSettled_(m,g)})};e.all=function(f){var m=$jscomp.makeIterator(f),g=m.next();return g.done?b([]):new e(function(h,
l){function n(r){return function(t){p[r]=t;q--;0==q&&h(p)}}var p=[],q=0;do p.push(void 0),q++,b(g.value).callWhenSettled_(n(p.length-1),l),g=m.next();while(!g.done)})};return e},"es6","es3");
(function(){var d=function(a){this.options=a={reloadTime:a.reloadTime||1500};this.video_page=0;this.video_canLoad=!0;this.init()};d.prototype.pjax_complete=function(){this.init()};d.prototype.init=function(){$(document).on("touchstart",function(a){});this.init_head_title();this.init_page_loading();this.init_url_hash();this.init_document_title();this.init_document_barrager();this.init_document_progress();this.init_document_live2d();this.init_document_contextmenu();this.init_document_theme();this.init_hover_music();
this.init_back_top();this.init_document_census();this.init_high_light();this.init_document_console();this.init_document_weather();this.init_3d_tag();this.init_load_more();this.init_document_swiper();this.init_document_analysis();this.init_owo();this.init_replay_see();this.init_draw();this.init_admire();this.init_thumbs_up();this.init_share_code();this.init_copy();this.init_synth();this.init_typecho_comment();this.init_markdown();this.init_baidu_collect();this.init_typing();this.init_life_time();this.init_aside_reply();
this.init_file_toggle();this.init_floor_click();this.init_drop_down();this.init_aside_config();this.init_sign_verify();this.init_pagination_hash();this.init_replay_content();this.init_comment();this.init_leaving();this.init_wap_search_click();this.init_search_verify();this.init_protect_verify();this.init_dynamic_verify();this.init_comment_submit();this.init_wap_cloud();this.init_wap_search();this.init_wap_sidebar();this.init_wow();this.init_video_list_type();this.init_video_list();this.init_video_search();
this.init_load_more_video();this.init_video_detail();this.init_j_tabs();this.init_j_collapse();this.init_aside_motto();this.init_comment_like();this.init_dynamic_reply();this.init_video_album();this.init_lazy_load()};d.prototype.changeURLArg=function(a,b,c){c=b+"="+c;return a.match(b+"=([^&]*)")?a.replace(eval("/("+b+"=)([^&]*)/gi"),c):a.match("[?]")?a+"&"+c:a+"?"+c};d.prototype.init_page_loading=function(){"off"!==window.JOE_CONFIG.DOCUMENT_PAGE_LOADING&&$(".fakeLoader").fakeLoader({timeToHide:1200,
bgColor:"#2ecc71",spinner:window.JOE_CONFIG.DOCUMENT_PAGE_LOADING})};d.prototype.init_url_hash=function(){var a=new URLSearchParams(location.search);if(a.get("jscroll")&&0<$("#"+a.get("jscroll")).length)var b=setTimeout(function(){window.scroll({top:$("#"+a.get("jscroll")).offset().top-($(".j-header").height()+20),behavior:"smooth"});clearTimeout(b)},300)};d.prototype.init_document_title=function(){if(""!==window.JOE_CONFIG.DOCUMENT_TITLE&&"on"!==window.JOE_CONFIG.IS_MOBILE){var a=document.title;
$(document).on("visibilitychange",function(){document.title="hidden"===document.visibilityState?window.JOE_CONFIG.DOCUMENT_TITLE:a})}};d.prototype.init_document_barrager=function(){"off"!==window.JOE_CONFIG.DOCUMENT_BARRAGER&&("on"===localStorage.getItem("barragerStatus")?($("#barrager").attr("checked",!0),$(".j-barrager").css({opacity:1,visibility:"visible"})):($("#barrager").attr("checked",!1),$(".j-barrager").css({opacity:0,visibility:"hidden"})),$("#barrager").on("change",function(){localStorage.setItem("barragerStatus",
$(this).prop("checked")?"on":"off");$("#barrager").prop("checked")?$(".j-barrager").css({opacity:1,visibility:"visible"}):$(".j-barrager").css({opacity:0,visibility:"hidden"})}))};d.prototype.init_document_progress=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_PROGRESS){var a=function(){var b=$(window).scrollTop(),c=$(document).height(),e=$(window).height();b=parseInt(b/(c-e)*100);0>b&&(b=0);100<b&&(b=100);$("#progress").css("width",b+"%")};a();$(window).on("scroll",function(){return a()})}};d.prototype.init_document_live2d=
function(){"off"!==window.JOE_CONFIG.DOCUMENT_LIVE2D&&"on"!==window.JOE_CONFIG.IS_MOBILE&&L2Dwidget.init({model:{jsonPath:window.JOE_CONFIG.DOCUMENT_LIVE2D,scale:1},mobile:{show:!1},display:{position:"right",width:160,height:200,hOffset:70,vOffset:0}})};d.prototype.init_document_contextmenu=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_CONTEXTMENU&&"on"!==window.JOE_CONFIG.IS_MOBILE)$(document).on("contextmenu",function(){return!1})};d.prototype.init_document_theme=function(){"on"===window.JOE_CONFIG.DOCUMENT_THEME_STATUS?
(""===window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME?$("body").css("--theme",localStorage.getItem("--theme")||"#4e7cf2"):$("body").css("--theme",localStorage.getItem("--theme")||window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME),$("#colorPick").colpick({flat:!0,layout:"hex",submit:!1,color:localStorage.getItem("--theme")||""===window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME?"#4e7cf2":window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME,colorScheme:"dark",onChange:function(a,b,c){$("body").css("--theme","#"+b);localStorage.setItem("--theme",
"#"+b)}}),$("#openColorPick").on("click",function(a){a.stopPropagation();$("#colorPick").toggleClass("active")}),$("#colorPick").on("click",function(a){a.stopPropagation()}),$(document).on("click",function(a){$("#colorPick").removeClass("active")})):""===window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME?$("body").css("--theme","#4e7cf2"):$("body").css("--theme",window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME)};d.prototype.init_hover_music=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_HOVER_MUSIC&&"on"!==window.JOE_CONFIG.IS_MOBILE)$(".j-hover-music").on("mouseover",
function(){$("#j-hover-music").attr("src",window.JOE_CONFIG.THEME_URL+"/assets/audio/"+(Math.floor(8*Math.random())+1)+".ogv")})};d.prototype.init_back_top=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_BACK_TOP){var a=function(){500<$(window).scrollTop()?$("#backToTop").addClass("active"):$("#backToTop").removeClass("active")};a();$(window).on("scroll",function(){return a()});$("#backToTop").on("click",function(){window.scroll({top:0,behavior:"smooth"})})}};d.prototype.init_document_census=function(){"off"!==
window.JOE_CONFIG.DOCUMENT_CENSUS.status&&Highcharts.chart("census",{title:{text:null},subtitle:{text:null},xAxis:{text:null,categories:["\u9875\u9762","\u6587\u7ae0","\u8bc4\u8bba","\u5206\u7c7b"]},yAxis:{title:{text:null}},credits:{enabled:!1},series:[{name:"\u6570\u91cf",type:"column",colorByPoint:!0,data:window.JOE_CONFIG.DOCUMENT_CENSUS.data,showInLegend:!1}]})};d.prototype.init_high_light=function(){"off"!==window.JOE_CONFIG.DOCUMENT_HIGHT_LIGHT&&hljs.initHighlighting()};d.prototype.init_document_console=
function(){"off"!=window.JOE_CONFIG.DOCUMENT_CONSOLE&&function(a,b){a||(!function(c){var e=e||{};e.create=function(k){function f(){window.Firebug&&window.Firebug.chrome&&window.Firebug.chrome.isInitialized?m("on"):(l="off",console.log(n),console.clear(),m(l))}function m(t){p!==t&&(p=t,"function"==typeof h.onchange&&h.onchange(t))}"function"==typeof k&&(k={onchange:k});var g=(k=k||{}).delay||500,h={};h.onchange=k.onchange;var l,n=new Image;n.__defineGetter__("id",function(){l="on"});var p="unknown";
h.getStatus=function(){return p};var q=setInterval(f,g);window.addEventListener("resize",f);var r;return h.free=function(){r||(r=!0,window.removeEventListener("resize",f),clearInterval(q))},h};"function"==typeof define?(define.amd||define.cmd)&&define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window.jdetects=e}(),jdetects.create(function(c){var e=0;setInterval(function(){"on"==c&&setTimeout(function(){0==e&&(e=1,setTimeout(b))},200)},100)}))}(!1,function(){window.location.href=
window.JOE_CONFIG.THEME_URL+"/console.html"})};d.prototype.init_document_weather=function(){if(""!==window.JOE_CONFIG.DOCUMENT_WEATHER_KEY){window.WIDGET={CONFIG:{layout:2,width:"220",height:"270",background:"auto"===window.JOE_CONFIG.DOCUMENT_WEATHER_TYPE?1:2,dataColor:"auto"===window.JOE_CONFIG.DOCUMENT_WEATHER_TYPE?"ffffff":"303133",key:window.JOE_CONFIG.DOCUMENT_WEATHER_KEY}};var a=setTimeout(function(){$(".aside-wether .loading").addClass("active");clearTimeout(a)},1E3)}};d.prototype.init_3d_tag=
function(){if("off"!==window.JOE_CONFIG.DOCUMENT_3D_TAG){var a=[];$("#cloudList li").each(function(b,c){a.push({label:$(c).attr("data-label"),url:$(c).attr("data-url"),target:"_blank"})});$("#cloud").svg3DTagCloud({entries:a,width:220,height:230,radius:"65%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:.5,fontSize:13,fontColor:"#fff",fontWeight:"500",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!0})}};d.prototype.init_load_more=function(){if("ajax"===
window.JOE_CONFIG.DOCUMENT_LOAD_MORE){var a=this;$(".j-loadmore a").attr("data-href",$(".j-loadmore a").attr("href"));$(".j-loadmore a").removeAttr("href");$(".j-loadmore a").on("click",function(){var b=this;if(!$(this).attr("disabled")){$(this).html("loading...");$(this).attr("disabled",!0);var c=$(this).attr("data-href");c&&$.ajax({url:c,type:"get",success:function(e){$(b).removeAttr("disabled");$(b).html("\u67e5\u770b\u66f4\u591a");var k=$(e).find(".article-list:not(.sticky)");$(".j-index-article.article").append(k);
window.scroll({top:$(k).first().offset().top-($(".j-header").height()+20),behavior:"smooth"});(e=$(e).find(".j-loadmore a").attr("href"))?$(b).attr("data-href",e):$(".j-loadmore").remove();a.init_lazy_load()}})}})}};d.prototype.init_document_swiper=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_SWIPER&&Swiper){var a=0<$("#recommend").length?"vertical":"horizontal";new Swiper(".swiper-container",{direction:a,slidesPerView:1,spaceBetween:20,mousewheel:!0,autoplay:{delay:2500,disableOnInteraction:!1},
pagination:{el:".swiper-pagination",clickable:!0}})}};d.prototype.init_document_analysis=function(){if(0!==$("#j-video").length)if("on"===window.JOE_CONFIG.DOCUMENT_ANALYSIS)$("#j-dplayer-iframe").attr("src",$("#j-dplayer-iframe").attr("data-src")+$("#j-video .episodes ul li").first().attr("data-url")),$("#j-video .episodes ul li").first().addClass("active"),$("#j-video .player-box .title span").html("\u6b63\u5728\u64ad\u653e\uff1a"+$("#j-video .episodes ul li span").first().html()),$("#j-video .episodes ul li").on("click",
function(){$("#j-video .episodes ul li").removeClass("active");$(this).addClass("active");$("#j-dplayer-iframe").attr("src",$("#j-dplayer-iframe").attr("data-src")+$(this).attr("data-url"));$("#j-video .player-box .title span").html("\u6b63\u5728\u64ad\u653e\uff1a"+$(this).find("span").html())});else{var a={container:document.getElementById("j-dplayer"),autoplay:!0,theme:"var(--theme)",screenshot:!0,hotkey:!0,preload:"auto",video:{url:$("#j-video .episodes ul li").first().attr("data-url"),type:"auto",
pic:"//cdn.jsdelivr.net/npm/typecho_joe_theme@3.2.0/assets/img/player.jpg"}};""!==window.JOE_CONFIG.DPLAYER_DANMAKU_API&&(a.danmaku={id:$("#j-video .episodes ul li").first().attr("data-url"),api:window.JOE_CONFIG.DPLAYER_DANMAKU_API});var b=new DPlayer(a);$("#j-video .episodes ul li").first().addClass("active");$("#j-video .player-box .title span").html("\u6b63\u5728\u64ad\u653e\uff1a"+$("#j-video .episodes ul li span").first().html());$("#j-video .episodes ul li").on("click",function(){$("#j-video .episodes ul li").removeClass("active");
$(this).addClass("active");$("#j-video .player-box .title span").html("\u6b63\u5728\u64ad\u653e\uff1a"+$(this).find("span").html());b.switchVideo({url:$(this).attr("data-url")},""!==window.JOE_CONFIG.DPLAYER_DANMAKU_API?{id:$(this).attr("data-url"),api:window.JOE_CONFIG.DPLAYER_DANMAKU_API}:null);b.play()})}};d.prototype.init_owo=function(){0!==$(".OwO").length&&(new OwO({logo:"O\u03c9O\u8868\u60c5",container:document.getElementsByClassName("OwO")[0],target:document.getElementsByClassName("OwO-textarea")[0],
api:window.JOE_CONFIG.THEME_URL+"/OwO.json",position:"down",width:"100%",maxHeight:"250px"}),$(document).on("click",function(){$(".OwO").removeClass("OwO-open")}))};d.prototype.init_replay_see=function(){$(".need-reply span").on("click",function(){var a=$(this).attr("data-href");window.scrollTo({top:$("#"+a).offset().top-($(".j-header").height()+20),behavior:"smooth"})})};d.prototype.init_draw=function(){0!==$("#draw").length&&(window.sketchpad=new Sketchpad({element:"#draw",height:300,penSize:5,
color:"303133"}),$("#commentTypeContent .undo").on("click",function(){window.sketchpad.undo()}),$("#commentTypeContent .animate").on("click",function(){window.sketchpad.animate(10)}),$("#commentTypeContent .canvas ul li").on("click",function(){window.sketchpad.penSize=$(this).attr("data-line");$("#commentTypeContent .canvas ul li").removeClass("active");$(this).addClass("active")}),$("#commentTypeContent .canvas ol li").on("click",function(){window.sketchpad.color=$(this).attr("data-color");$("#commentTypeContent .canvas ol li").removeClass("active");
$(this).addClass("active")}))};d.prototype.init_admire=function(){$("#j-admire").on("click",function(){$(".j-admire-modal").addClass("active");$("body").css("overflow","hidden")});$(".j-admire-modal .close").on("click",function(){$(".j-admire-modal").removeClass("active");$("body").css("overflow","")})};d.prototype.init_thumbs_up=function(){$("#j-thumbs-up").on("click",function(){if($(this).attr("disabled"))return $.toast({type:"warning",message:"\u672c\u7bc7\u6587\u7ae0\u60a8\u5df2\u7ecf\u8d5e\u8fc7~"});
$.ajax({type:"post",url:$(this).attr("data-url"),data:"agree="+$(this).attr("data-cid"),timeout:3E4,cache:!1,success:function(a){/\d/.test(a)&&$("#j-thumbs-up span").html("\u8d5e\uff08"+a.trim()+"\uff09");$.toast({type:"success",message:"\u611f\u8c22\u60a8\u7684\u70b9\u8d5e\uff01"});$("#j-thumbs-up").attr("disabled","disabled")}})})};d.prototype.init_share_code=function(){0!==$("#j-share-code").length&&$("#j-share-code").qrcode({render:"canvas",width:90,height:90,text:encodeURI(window.location.href),
background:"#ffffff",foreground:"#000000",correctLevel:0})};d.prototype.init_copy=function(){$(".j-copy").on("click",function(a){a.preventDefault();$("body").append('<input id="copyInput" value="'+$(this).attr("data-copy")+'"/>');$("#copyInput").select();document.execCommand("copy");$.toast({type:"success",message:"\u5df2\u590d\u5236\u5230\u526a\u5207\u677f\u4e2d~"});$("#copyInput").remove()})};d.prototype.init_synth=function(){if(!window.speechSynthesis)return $("#read").remove();$("#read").on("click",
function(){var a=window.speechSynthesis,b=new SpeechSynthesisUtterance;"\u6717\u8bfb"===$(this).find("span").html()?(b.lang="zh-CN",b.text=$("#markdown").text(),a.speak(b),$(this).find("span").html("\u505c\u6b62\u6717\u8bfb")):(a.cancel(b),$(this).find("span").html("\u6717\u8bfb"))})};d.prototype.init_typecho_comment=function(){window.TypechoComment={dom:function(a){return document.getElementById(a)},create:function(a,b){a=document.createElement(a);for(var c in b)a.setAttribute(c,b[c]);return a},
reply:function(a,b){var c=this.dom(a),e=this.dom($(".j-comment").attr("data-respondid")),k=this.dom("comment-parent"),f="form"==e.tagName?e:e.getElementsByTagName("form")[0],m=e.getElementsByTagName("textarea")[0];null==k&&(k=this.create("input",{type:"hidden",name:"parent",id:"comment-parent"}),f.appendChild(k));k.setAttribute("value",b);null==this.dom("comment-form-place-holder")&&(b=this.create("div",{id:"comment-form-place-holder"}),e.parentNode.insertBefore(b,e));0===$(c).find(e).length&&c.appendChild(e);
this.dom("cancel-comment-reply-link").style.display="";null!=m&&"text"==m.name&&window.scroll({top:$("#li-"+a).offset().top-($(".j-header").height()+20),behavior:"smooth"});return!1},cancelReply:function(){var a=this.dom($(".j-comment").attr("data-respondid")),b=this.dom("comment-form-place-holder"),c=this.dom("comment-parent");null!=c&&c.parentNode.removeChild(c);if(null==b)return!0;this.dom("cancel-comment-reply-link").style.display="none";b.parentNode.insertBefore(a,b);window.scroll({top:$("#comments").offset().top-
($(".j-header").height()+20),behavior:"smooth"});return!1}}};d.prototype.init_markdown=function(){$("#markdown a:not(a[no-target])").attr({target:"_blank"});$("#markdown img:not(img.owo)").each(function(){var a=document.createElement("a");$(a).attr("data-fancybox","gallery");$(a).attr("href",$(this).attr("data-original")||$(this).attr("src"));$(this).wrap(a)})};d.prototype.init_baidu_collect=function(){var a=$("#baiduIncluded");$.ajax({url:window.JOE_CONFIG.THEME_URL+"/baibaiduRecord.php?url="+encodeURI(window.location.href),
method:"get",success:function(b){b.success?"\u672a\u6536\u5f55"===b.data.baidu?""===window.JOE_CONFIG.DOCUMENT_BAIDU_TOKEN?a.html('<a target="_blank" href="https://ziyuan.baidu.com/linksubmit/url?sitename='+encodeURI(window.location.href)+'">\u672a\u6536\u5f55\uff0c\u53bb\u63d0\u4ea4</a>'):a.html("<span>\u70b9\u51fb\u63a8\u9001</span>"):(a.html("\u767e\u5ea6\u5df2\u6536\u5f55"),a.css("color","#3bca72")):(a.html("\u67e5\u8be2\u5931\u8d25"),a.css("color","#f56c6c"))}});$(document).on("click","#baiduIncluded span",
function(){$.ajax({url:window.JOE_CONFIG.THEME_URL+"/baiduPush.php?urls="+encodeURI(window.location.href),method:"get",dataType:"json",data:{token:window.JOE_CONFIG.DOCUMENT_BAIDU_TOKEN,domain:window.location.hostname},success:function(b){var c={"site error":"\u7ad9\u70b9\u672a\u9a8c\u8bc1\uff01","empty content":"\u5185\u5bb9\u4e3a\u7a7a\uff01","only 2000 urls are allowed once":"\u8d85\u8fc7\u9650\u5236\uff01","over quota":"\u4eca\u65e5\u63d0\u4ea4\u5df2\u4e0a\u9650"};b.success?(a.css("color","#3bca72"),
a.html("\u63a8\u9001\u6210\u529f\uff01")):(a.css("color","#e6a23c"),401===b.error?a.html("Token\u9519\u8bef\uff01"):400===b.error?a.html(c[b.message]||"\u672a\u77e5\u9519\u8bef"):404===b.error?a.html("\u5730\u5740\u9519\u8bef\uff01"):a.html("\u670d\u52a1\u5f02\u5e38\uff01"))}})})};d.prototype.init_typing=function(){$(".j-typing").each(function(a,b){$(b).show();$(b).css("opacity",1);var c=$(b).html(),e=null,k=0,f=function(){k<=c.length?($(b).html(c.slice(0,k++)+"_"),e=setTimeout(f,100)):($(b).html(c),
clearTimeout(e))};f()})};d.prototype.init_life_time=function(){function a(){var b=+new Date,c=(new Date((new Date).toLocaleDateString())).getTime();b=(b-c)/1E3/60/60;c=b/24*100;$("#dayProgress .title span").html(parseInt(b));$("#dayProgress .progress .progress-inner").css("width",parseInt(c)+"%");$("#dayProgress .progress .progress-percentage").html(parseInt(c)+"%");b={0:7,1:1,2:2,3:3,4:4,5:5,6:6}[(new Date).getDay()];c=b/7*100;$("#weekProgress .title span").html(b);$("#weekProgress .progress .progress-inner").css("width",
parseInt(c)+"%");$("#weekProgress .progress .progress-percentage").html(parseInt(c)+"%");var e=(new Date).getFullYear();c=(new Date).getDate();b=(new Date).getMonth()+1;e=(new Date(e,b,0)).getDate();e=c/e*100;$("#monthProgress .title span").html(c);$("#monthProgress .progress .progress-inner").css("width",parseInt(e)+"%");$("#monthProgress .progress .progress-percentage").html(parseInt(e)+"%");c=b/12*100;$("#yearProgress .title span").html(b);$("#yearProgress .progress .progress-inner").css("width",
parseInt(c)+"%");$("#yearProgress .progress .progress-percentage").html(parseInt(c)+"%")}a();setInterval(function(){a()},1E3)};d.prototype.init_aside_reply=function(){$("#asideReply a").each(function(a,b){a=$(b).html();/\{!\{.*/.test(a)?$(b).html("# \u56fe\u7247\u56de\u590d"):$(b).html(a);$(b).css("display","-webkit-box");$(b).attr("href").includes("#")&&$(b).attr("href",$(b).attr("href").replace("#","?jscroll="))})};d.prototype.init_file_toggle=function(){var a=$(".j-file .panel");a.first().next().slideToggle(0);
a.on("click",function(){var b=$(this).next();b.slideToggle(200);$(".j-file .panel-body").not(b).slideUp()})};d.prototype.init_floor_click=function(){if("on"!==window.JOE_CONFIG.IS_MOBILE)$(".j-floor a").on("click",function(a){a.preventDefault();window.scroll({top:$($(this).attr("data-href")).offset().top-($(".j-header").height()+20),behavior:"smooth"})})};d.prototype.init_drop_down=function(){$(".j-drop").on("click",function(a){a.stopPropagation();$(this).siblings(".j-dropdown").hasClass("active")?
$(this).siblings(".j-dropdown").removeClass("active"):($(".j-dropdown").removeClass("active"),$(this).siblings(".j-dropdown").addClass("active"))});$(document).on("click",function(a){return $(".j-dropdown").removeClass("active")});$(".j-dropdown[stop-propagation]").on("click",function(a){a.stopPropagation()})};d.prototype.init_aside_config=function(){var a=$(".j-aside"),b=$(".j-header"),c=a.width();0<c&&($(".j-stretch").addClass("active"),a.css("width",c));$(".j-aside .aside").last().css("top",b.height()+
20);$(".j-floor .contain").css("top",b.height()+20);$(".j-stretch .contain").css("top",b.height()+20);$(".j-stretch .contain").on("click",function(){0===a.width()?(a.css("width",c),a.css("overflow","")):(a.css("width",0),a.css("overflow","hidden"));$("#commentType button[data-type='text']").click()})};d.prototype.init_sign_verify=function(){$("#loginForm").on("submit",function(a){if(""===$("#loginForm .username").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"});
if(""===$("#loginForm .password").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"})});$("#registerForm").on("submit",function(a){if(""===$("#registerForm .username").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"});if(""===$("#registerForm .mail").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\uff01"});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($("#registerForm .mail").val()))return a.preventDefault(),
$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"})})};d.prototype.init_pagination_hash=function(){$(".j-pagination a").each(function(a,b){$(b).attr("href")&&$(b).attr("href").includes("#")&&$(b).attr("href",$(b).attr("href").replace("#","?jscroll="))})};d.prototype.init_replay_content=function(){$(".replyContent p").each(function(a,b){a=$(b).html();/\{!\{.*\}!\}/.test(a)&&(a=a.replace(/{!{/,"").replace(/}!}/,""),$(b).html('<img class="canvas" src="'+a+'" />'))});
$(".replyContent").show()};d.prototype.init_comment=function(){$("#commentType button").on("click",function(){$("#commentType button").removeClass("active");$(this).addClass("active");var a=$("#commentTypeContent .canvas");"canvas"===$(this).attr("data-type")?($("#draw").prop("width",$("#commentTypeContent").width()),$("#commentTypeContent textarea").hide(),a.show(),a.attr("data-type","canvas")):($("#commentTypeContent textarea").show(),a.hide(),a.attr("data-type","text"))});$(".comment-list .meta a").on("click",
function(){$("#draw").prop("width",$("#commentTypeContent").width())});$("#cancel-comment-reply-link").on("click",function(){$("#draw").prop("width",$("#commentTypeContent").width())})};d.prototype.init_leaving=function(){function a(c,e){return Math.floor(Math.random()*(e-c+1))+c}var b=100;$("#j-leaving li").each(function(c,e){$(e).find(".body .content p").each(function(k,f){k=$(f).html();/\{!\{.*\}!\}/.test(k)&&(k=k.replace(/{!{/,"").replace(/}!}/,""),$(f).html('<img class="canvas" src="'+k+'" />'))});
$(e).css({"z-index":a(1,99),"background-color":"rgba("+a(0,255)+", "+a(0,255)+", "+a(0,255)+", "+a(.8,1)+")",top:parseInt(Math.random()*($("#j-leaving").height()-$(e).height()),10),left:parseInt(Math.random()*($("#j-leaving").width()-$(e).width()),10),display:"flex"});$(e).draggabilly({containment:!0});$(e).on("dragStart",function(k){b++;$(e).css("z-index",b)})})};d.prototype.init_wap_search_click=function(){$(".j-search-toggle").on("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?
($(".j-nav").hide(),$(".j-search").css("display","flex")):($(".j-nav").css("display","flex"),$(".j-search").hide())})};d.prototype.init_search_verify=function(){$(".j-search").on("submit",function(a){if(""===$(".j-search input").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9\uff01"})})};d.prototype.init_protect_verify=function(){var a=this;$("#j-protected").on("submit",function(b){b.preventDefault();if(""===$("#j-protected").find(".pass").val())return $.toast({type:"info",
message:"\u8bf7\u8f93\u5165\u8bbf\u95ee\u5bc6\u7801\uff01"});b=$("#j-protected").attr("action");$.ajax({url:b,method:"post",datatype:"text",data:{protectPassword:$("#j-protected").find(".pass").val(),cid:$("#j-protected").find(".cid").val()},success:function(c){var e=[],k="";e=$(c).contents();Array.from(e).forEach(function(m){"container"===m.parentNode.className&&(k=m)});if(/TypechoJoeTheme/.test(c)){var f=location.href;f=a.changeURLArg(f,"jscroll","comments");$.toast({type:"success",message:"\u5bc6\u7801\u6b63\u786e\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});
setTimeout(function(){window.location.href=f},a.options.reloadTime)}else $.toast({type:"warning",message:k.textContent||""})}})})};d.prototype.init_dynamic_verify=function(){var a=this;$("#j-dynamic-form").on("submit",function(b){var c=this;b.preventDefault();if(""===$("#j-dynamic-form-text").val().trim())return $.toast({type:"info",message:"\u8bf7\u8f93\u5165\u53d1\u8868\u5185\u5bb9\uff01"});$(this).attr("data-disabled")||($(this).attr("data-disabled",!0),$.ajax({url:$(this).attr("action"),type:"post",
data:$(this).serializeArray(),success:function(e){var k=[],f="";k=$(e).contents();Array.from(k).forEach(function(g){"container"===g.parentNode.className&&(f=g)});if(/TypechoJoeTheme/.test(e)){var m=location.href;m=a.changeURLArg(m,"jscroll","comments");$.toast({type:"success",message:"\u53d1\u8868\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});setTimeout(function(){window.location.href=m},a.options.reloadTime)}else $.toast({type:"warning",message:f.textContent||""}),$(c).removeAttr("data-disabled")}}))})};
d.prototype.init_comment_submit=function(){var a=this;$("#comment-form").on("submit",function(b){var c=this;b.preventDefault();if(""===$("#comment-nick").val().trim())return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0\uff01"});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($("#comment-mail").val()))return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"});"canvas"===$("#commentTypeContent .canvas").attr("data-type")&&
(b=$("#draw")[0].toDataURL("image/webp",.1),$("#comment-content").val("{!{"+b+"}!} "));if(""===$("#comment-content").val().trim())return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9\uff01"});$(this).attr("data-disabled")||($(this).attr("data-disabled",!0),$.ajax({url:$(this).attr("action"),type:"post",data:$(this).serializeArray(),success:function(e){var k=[],f="";k=$(e).contents();Array.from(k).forEach(function(g){"container"===g.parentNode.className&&(f=g)});if(/TypechoJoeTheme/.test(e)){var m=
location.href;m=a.changeURLArg(m,"jscroll","comments");$.toast({type:"success",message:"\u53d1\u9001\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});setTimeout(function(){window.location.href=m},a.options.reloadTime)}else $.toast({type:"warning",message:f.textContent||""}),$(c).removeAttr("data-disabled")}}))})};d.prototype.init_wap_cloud=function(){var a=function(b,c){return Math.floor(Math.random()*(c-b+1))+b};$("#search-cloud a").each(function(b,c){$(c).css("background","rgba("+
a(0,255)+", "+a(0,255)+", "+a(0,255)+", "+a(.8,1)+")")})};d.prototype.init_wap_search=function(){$(".search-toggle-xs").on("click",function(){$(".j-slide").removeClass("active");$(".j-sidebar-xs").removeClass("active");var a=$(".j-search-down-xs");a.toggleClass("active");a.hasClass("active")?($("body").css("overflow","hidden"),$(".j-header").css("box-shadow","none")):($("body").css("overflow",""),$(".j-header").css("box-shadow",""))});$(".j-search-down-xs .mask").on("click",function(){$(".j-search-down-xs").removeClass("active");
$("body").css("overflow","");$(".j-header").css("box-shadow","")})};d.prototype.init_wap_sidebar=function(){$(".j-slide").on("click",function(a){$(".j-search-down-xs").removeClass("active");$("body").css("overflow","");$(".j-header").css("box-shadow","");$(this).toggleClass("active");$(".j-sidebar-xs").toggleClass("active");$(this).hasClass("active")?$("body").css("overflow","hidden"):$("body").css("overflow","")});$(".j-sidebar-xs .mask").on("click",function(){$(".j-slide").removeClass("active");
$(".j-sidebar-xs").removeClass("active");$("body").css("overflow","")});$(".j-sidebar-xs .item.category ul li a").unbind().bind("click",function(a){var b=$(this);b.parent().siblings(".active").toggleClass("active");if(b.next().is("ul")&&b.parent().toggleClass("active")&&a.preventDefault())return!1})};d.prototype.init_wow=function(){"on"===window.JOE_CONFIG.IS_MOBILE&&"off"===window.JOE_CONFIG.DOCUMENT_WAP_ANIMATION||"off"===window.JOE_CONFIG.IS_MOBILE&&"off"===window.JOE_CONFIG.DOCUMENT_PC_ANIMATION||
(new WOW({boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,scrollContainer:null})).init()};d.prototype.init_video_list_type=function(){if(0!==$("#j-video-type").length){if(""===window.JOE_CONFIG.VIDEO_LIST_API)return $.toast({type:"warning",message:"\u82f9\u679cCMS API\u672a\u586b\u5199\uff01"});$(".j-video-load-1").show();$.ajax({url:window.JOE_CONFIG.VIDEO_LIST_API,method:"get",data:{ac:"list",at:"json"},dataType:"json",success:function(b){if(1!==b.code)return $.toast({type:"warning",
message:"\u83b7\u53d6\u5217\u8868\u5931\u8d25\uff01"});$(".j-video-load-1").hide();var c='<li class="active">\u5168\u90e8</li>',e=window.JOE_CONFIG.VIDEO_LIST_SHIELD.split("||").map(function(k){return k.trim()});b.class.forEach(function(k){e.some(function(f){return f===k.type_name})||(c+='<li data-id="'+k.type_id+'">'+k.type_name+"</li>")});$("#j-video-type").html(c)}});var a=this;$(document).on("click","#j-video-type li",function(){$(this).addClass("active").siblings().removeClass("active");a.video_page=
0;$("#j-video-list").html("");a.init_video_list($(this).attr("data-id"))})}};d.prototype.init_video_list=function(a,b){if(0!==$("#j-video-list").length){var c=this;c.video_canLoad&&(c.video_canLoad=!1,c.video_page+=1,$(".j-video-load-2").show(),$.ajax({url:window.JOE_CONFIG.VIDEO_LIST_API,method:"get",data:{pg:c.video_page,ac:"videolist",at:"json",t:a,wd:b},dataType:"json",success:function(e){1===e.code&&($(".j-video-load-2").hide(),e.list.forEach(function(k){$("#j-video-list").append('\n                                <li>\n                                    <a href="'+
(window.location.href+"?vod_id="+k.vod_id)+'">\n                                        <img class="lazyload" src="'+window.JOE_CONFIG.DOCUMENT_LAZY_LOAD+'" data-original="'+k.vod_pic+'">\n                                        <h2>'+k.vod_name+"</h2>\n                                        "+(k.vod_year&&0!=k.vod_year?"<i>"+k.vod_year+"</i>":"")+"\n                                    </a>\n                                </li>\n                            ")}),c.init_lazy_load(),c.video_canLoad=
!0)}}))}};d.prototype.init_video_search=function(){var a=this;$("#j-video-search button").on("click",function(){if(""===$("#j-video-search input").val().trim())return $.toast({type:"info",message:"\u8bf7\u8f93\u5165\u5185\u5bb9\uff01"});a.video_page=0;$("#j-video-list").html("");a.init_video_list(null,$("#j-video-search input").val())})};d.prototype.init_load_more_video=function(){if(0!==$("#j-video-list").length){var a=this;$(window).on("scroll",function(){var b=$(window).scrollTop(),c=$(window).height(),
e=$("#j-video-list").offset().top+$("#j-video-list").height();b+c>=e&&a.init_video_list()})}};d.prototype.init_video_detail=function(){var a=this,b=(new URLSearchParams(window.location.search)).get("vod_id");b&&($(".j-video-load-3").show(),$.ajax({url:window.JOE_CONFIG.VIDEO_LIST_API,method:"get",data:{ac:"detail",at:"json",ids:b},dataType:"json",success:function(c){function e(q){q=q.split("$");return{name:q[0]||"",link:q[1]||""}}if(1!==c.code||1!==c.list.length)return $.toast({type:"warning",message:"\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff01"});
$(".j-video-load-3").hide();c=c.list[0];$("#j-video-info").html('\n\t\t\t\t\t\t<div class="image">\n\t\t\t\t\t\t\t<img class="lazyload" src="'+window.JOE_CONFIG.DOCUMENT_LAZY_LOAD+'" alt="'+c.vod_name+'" data-original="'+c.vod_pic+'" title="'+c.vod_name+'">\n\t\t\t\t\t\t\t'+(c.vod_year&&0!==c.vod_year?"<i>"+c.vod_year+"</i>":"")+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt>"+(c.vod_name+(c.vod_remarks?" - "+c.vod_remarks:""))+"</dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u7c7b\u578b\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+
(c.vod_class||"\u672a\u77e5")+"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u4e3b\u6f14\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+(c.vod_actor||"\u672a\u77e5")+"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u5bfc\u6f14\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+(c.vod_director||"\u672a\u77e5")+"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u7b80\u4ecb\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+(c.vod_content?c.vod_content:c.vod_blurb)+
"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t");a.init_lazy_load();var k=c.vod_play_from.split("$$$"),f=c.vod_play_url.split("$$$"),m=new Map;k.forEach(function(q,r){m.set(q,f[r]||[])});k={};for(var g=$jscomp.makeIterator(m),h=g.next();!h.done;k={$jscomp$loop$prop$str$4:k.$jscomp$loop$prop$str$4},h=g.next()){var l=$jscomp.makeIterator(h.value);h=l.next().value;l=l.next().value.split("#");k.$jscomp$loop$prop$str$4="";l.forEach(function(q){return function(r){q.$jscomp$loop$prop$str$4+=
'\n\t\t\t\t\t\t\t\t<li data-link="'+e(r).link+'">'+e(r).name+"</li>\n\t\t\t\t\t\t\t"}}(k));$("#j-video-play").append('\n\t\t\t\t\t\t\t<div class="video-list-play">\n\t\t\t\t\t\t\t\t<div class="title">\u6e90\uff1a'+h+'</div>\n\t\t\t\t\t\t\t\t<ul class="list-item">\n\t\t\t\t\t\t\t\t\t'+k.$jscomp$loop$prop$str$4+"\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t")}var n=$("#j-video-player iframe");if(n.attr("data-src")&&""!==n.attr("data-src")&&($(".video-list-play .list-item li").on("click",
function(){$(".video-list-play .list-item li").removeClass("active");$(this).addClass("active");n.attr("src",n.attr("data-src")+$(this).attr("data-link"));sessionStorage.setItem("playUrl",$(this).attr("data-link"))}),k=$("#j-video-play .video-list-play:first-child .list-item li:first-child"),0!==k.length)){if(sessionStorage.getItem("playUrl")){var p=null;$(".video-list-play .list-item li").each(function(q,r){$(r).attr("data-link")===sessionStorage.getItem("playUrl")&&($(r).addClass("active"),p=!0)});
!0===p?n.attr("src",n.attr("data-src")+sessionStorage.getItem("playUrl")):(n.attr("src",n.attr("data-src")+k.attr("data-link")),k.addClass("active"))}else n.attr("src",n.attr("data-src")+k.attr("data-link")),k.addClass("active");$("#j-video-player-title").html("\u6b63\u5728\u64ad\u653e\uff1a"+c.vod_name)}}}))};d.prototype.init_j_tabs=function(){$(".j-tabs .nav span").on("click",function(){var a=$(this).attr("data-panel");$(this).addClass("active").siblings().removeClass("active");$(this).parents(".j-tabs").find(".content div").hide();
$(this).parents(".j-tabs").find(".content div[data-panel="+a+"]").show()})};d.prototype.init_j_collapse=function(){$(".j-collapse .collapse-head").on("click",function(){var a=$(this).next();a.slideToggle(200);$(".j-collapse .collapse-body").not(a).slideUp()})};d.prototype.init_aside_motto=function(){var a=$(".j-aside-motto");if("on"===window.JOE_CONFIG.DOCUMENT_ASIDE_MOTTO)a.show();else{var b=function(){$.ajax({url:window.JOE_CONFIG.DOCUMENT_MOTTO_API,method:"get",dataType:"text",success:function(c){a.html(c);
a.show()},error:function(c){a.html("\u4eba\u751f\u4e4b\u8def\uff0c\u96be\u514d\u574e\u5777\uff0c\u4f46\u6211\u6267\u7740");a.show()}})};b();setInterval(b,5E3)}};d.prototype.init_comment_like=function(){$(".j-comment-like").on("click",function(){var a=this;if($(this).hasClass("active"))return $.toast({type:"warning",message:"\u672c\u6761\u8bc4\u8bba\u60a8\u5df2\u7ecf\u8d5e\u8fc7~"});$.ajax({url:window.location.href,type:"post",data:"likeup="+$(this).attr("data-coid"),timeout:3E4,cache:!1,success:function(b){/\d/.test(b)&&
$(a).find("span").html(b.trim());$.toast({type:"success",message:"\u70b9\u8d5e\u6210\u529f\uff01"});$(a).addClass("active")}})})};d.prototype.init_dynamic_reply=function(){var a=this,b=$(".j-dynamic-reply");$(document).on("click",function(){return b.hide()});$(".j-comment-reply").on("click",function(c){c.stopPropagation();$(this).parents("li").find(".j-dynamic-reply").toggle()});b.on("click",function(c){return c.stopPropagation()});b.on("submit",function(c){var e=this;c.preventDefault();if(""===$(this).find("input[name='author']").val().trim())return $.toast({type:"warning",
message:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0\uff01"});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($(this).find("input[name='mail']").val()))return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"});if(""===$(this).find("textarea[name='text']").val().trim())return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9\uff01"});$(this).attr("data-disabled")||($(this).attr("data-disabled",!0),$.ajax({url:$(".j-comment-url").val(),
type:"post",data:$(this).serializeArray(),success:function(k){var f=[],m="";f=$(k).contents();Array.from(f).forEach(function(h){"container"===h.parentNode.className&&(m=h)});if(/TypechoJoeTheme/.test(k)){var g=location.href;g=a.changeURLArg(g,"jscroll","comments");$.toast({type:"success",message:"\u53d1\u9001\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});setTimeout(function(){window.location.href=g},a.options.reloadTime)}else $.toast({type:"warning",message:m.textContent||""}),$(e).removeAttr("data-disabled")}}))})};
d.prototype.init_video_album=function(){function a(b,c,e,k){c=void 0===c?1:c;e=void 0===e?1:e;k=void 0===k?.5:k;var f=document.createElement("VIDEO");f.setAttribute("src",b);f.crossOrigin="*";f.currentTime=c;return new Promise(function(m,g){f.addEventListener("loadeddata",function(){var h=document.createElement("canvas");h.width=f.videoWidth*e;h.height=f.videoHeight*e;h.getContext("2d").drawImage(f,0,0,h.width,h.height);m(h.toDataURL("image/webp",k))})})}$(".j-short-video .inner").each(function(b,
c){b=$(c).attr("data-poster");var e=$(c).attr("data-src");isNaN(b)?$(c).css("background-image","url("+b+")"):a(e,b).then(function(k){$(c).css("background-image","url("+k+")")});$(c).on("click",function(){$("body").css("overflow","hidden");$(".j-video-preview").addClass("active");$(".j-video-preview iframe").attr("src",window.JOE_CONFIG.THEME_URL+"/player.php?url="+e)})});$(".j-video-preview .close").on("click",function(){$("body").css("overflow","");$(".j-video-preview").removeClass("active")})};
d.prototype.init_lazy_load=function(){new LazyLoad(".lazyload")};d.prototype.init_head_title=function(){var a=$("header.j-header"),b=$(".row.above .above-nav"),c=$(".row.below"),e=$("#post_top_title"),k=!0,f=!0,m=function(){e.addClass("post_no");b.removeClass("post_no");c.slideDown("fast",function(){k=!0})},g=function(){e.removeClass("post_no");b.addClass("post_no");c.slideUp("normal",function(){f=!0})};$(document).ready(function(){if(!(768>screen.width)){var h=a.width(),l=0;0<e.length&&750<h&&$(window).scroll(function(){var n=
$(window).scrollTop();400<n&&500>n||(450<=n?l>n&&f?(k=!1,m()):k&&(f=!1,g()):m(),l=n)})}})};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=d:window.Joe=d})();new Joe({});
