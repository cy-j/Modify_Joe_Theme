var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.createTemplateTagFirstArg=function(b){return b.raw=b};$jscomp.createTemplateTagFirstArgWithRaw=function(b,a){b.raw=a;return b};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};
$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.ISOLATE_POLYFILLS=!1;$jscomp.FORCE_POLYFILL_PROMISE=!1;$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,c){if(b==Array.prototype||b==Object.prototype)return b;b[a]=c.value;return b};
$jscomp.getGlobal=function(b){b=["object"==typeof globalThis&&globalThis,b,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<b.length;++a){var c=b[a];if(c&&c.Math==Math)return c}throw Error("Cannot find global object");};$jscomp.global=$jscomp.getGlobal(this);$jscomp.IS_SYMBOL_NATIVE="function"===typeof Symbol&&"symbol"===typeof Symbol("x");$jscomp.TRUST_ES6_POLYFILLS=!$jscomp.ISOLATE_POLYFILLS||$jscomp.IS_SYMBOL_NATIVE;$jscomp.polyfills={};
$jscomp.propertyToPolyfillSymbol={};$jscomp.POLYFILL_PREFIX="$jscp$";var $jscomp$lookupPolyfilledValue=function(b,a){var c=$jscomp.propertyToPolyfillSymbol[a];if(null==c)return b[a];c=b[c];return void 0!==c?c:b[a]};$jscomp.polyfill=function(b,a,c,d){a&&($jscomp.ISOLATE_POLYFILLS?$jscomp.polyfillIsolated(b,a,c,d):$jscomp.polyfillUnisolated(b,a,c,d))};
$jscomp.polyfillUnisolated=function(b,a,c,d){c=$jscomp.global;b=b.split(".");for(d=0;d<b.length-1;d++){var e=b[d];if(!(e in c))return;c=c[e]}b=b[b.length-1];d=c[b];a=a(d);a!=d&&null!=a&&$jscomp.defineProperty(c,b,{configurable:!0,writable:!0,value:a})};
$jscomp.polyfillIsolated=function(b,a,c,d){var e=b.split(".");b=1===e.length;d=e[0];d=!b&&d in $jscomp.polyfills?$jscomp.polyfills:$jscomp.global;for(var k=0;k<e.length-1;k++){var f=e[k];if(!(f in d))return;d=d[f]}e=e[e.length-1];c=$jscomp.IS_SYMBOL_NATIVE&&"es6"===c?d[e]:null;a=a(c);null!=a&&(b?$jscomp.defineProperty($jscomp.polyfills,e,{configurable:!0,writable:!0,value:a}):a!==c&&($jscomp.propertyToPolyfillSymbol[e]=$jscomp.IS_SYMBOL_NATIVE?$jscomp.global.Symbol(e):$jscomp.POLYFILL_PREFIX+e,e=
$jscomp.propertyToPolyfillSymbol[e],$jscomp.defineProperty(d,e,{configurable:!0,writable:!0,value:a})))};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(c){}return!1};$jscomp.setPrototypeOf=$jscomp.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};
$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return{value:b}};
$jscomp.generator.Context.prototype.yieldAll=function(b,a){b=$jscomp.makeIterator(b);var c=b.next();$jscomp.generator.ensureIteratorResultIsObject_(c);if(c.done)this.yieldResult=c.value,this.nextAddress=a;else return this.yieldAllIterator_=b,this.yield(c.value,a)};$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;void 0!=a&&(this.finallyAddress_=a)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,a,c){c?this.finallyContexts_[c]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=a||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,a){a=this.finallyContexts_.splice(a||0)[0];if(a=this.abruptCompletion_=this.abruptCompletion_||a){if(a.isException)return this.jumpToErrorHandler_();void 0!=a.jumpTo&&this.finallyAddress_<a.jumpTo?(this.nextAddress=a.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var a in b)this.properties_.push(a);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a)return this.yieldAllStep_("return"in a?a["return"]:function(c){return{value:c,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,a,c){try{var d=b.call(this.context_.yieldAllIterator_,a);$jscomp.generator.ensureIteratorResultIsObject_(d);if(!d.done)return this.context_.stop_(),d;var e=d.value}catch(k){return this.context_.yieldAllIterator_=null,this.context_.throw_(k),this.nextStep_()}this.context_.yieldAllIterator_=null;c.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(a){this.context_.yieldResult=void 0,this.context_.throw_(a)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(a){return b.next_(a)};this.throw=function(a){return b.throw_(a)};this.return=function(a){return b.return_(a)};this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,a){a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a));$jscomp.setPrototypeOf&&b.prototype&&$jscomp.setPrototypeOf(a,b.prototype);return a};
$jscomp.asyncExecutePromiseGenerator=function(b){function a(d){return b.next(d)}function c(d){return b.throw(d)}return new Promise(function(d,e){function k(f){f.done?d(f.value):Promise.resolve(f.value).then(a,c).then(k,e)}k(b.next())})};$jscomp.asyncExecutePromiseGeneratorFunction=function(b){return $jscomp.asyncExecutePromiseGenerator(b())};$jscomp.asyncExecutePromiseGeneratorProgram=function(b){return $jscomp.asyncExecutePromiseGenerator(new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(b)))};
$jscomp.initSymbol=function(){};$jscomp.polyfill("Symbol",function(b){if(b)return b;var a=function(e,k){this.$jscomp$symbol$id_=e;$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:k})};a.prototype.toString=function(){return this.$jscomp$symbol$id_};var c=0,d=function(e){if(this instanceof d)throw new TypeError("Symbol is not a constructor");return new a("jscomp_symbol_"+(e||"")+"_"+c++,e)};return d},"es6","es3");
$jscomp.polyfill("Symbol.iterator",function(b){if(b)return b;b=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),c=0;c<a.length;c++){var d=$jscomp.global[a[c]];"function"===typeof d&&"function"!=typeof d.prototype[b]&&$jscomp.defineProperty(d.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}})}return b},"es6",
"es3");$jscomp.iteratorPrototype=function(b){b={next:b};b[Symbol.iterator]=function(){return this};return b};
$jscomp.polyfill("Promise",function(b){function a(){this.batch_=null}function c(f){return f instanceof e?f:new e(function(m,h){m(f)})}if(b&&(!($jscomp.FORCE_POLYFILL_PROMISE||$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&"undefined"===typeof $jscomp.global.PromiseRejectionEvent)||!$jscomp.global.Promise||-1===$jscomp.global.Promise.toString().indexOf("[native code]")))return b;a.prototype.asyncExecute=function(f){if(null==this.batch_){this.batch_=[];var m=this;this.asyncExecuteFunction(function(){m.executeBatch_()})}this.batch_.push(f)};
var d=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(f){d(f,0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var f=this.batch_;this.batch_=[];for(var m=0;m<f.length;++m){var h=f[m];f[m]=null;try{h()}catch(g){this.asyncThrow_(g)}}}this.batch_=null};a.prototype.asyncThrow_=function(f){this.asyncExecuteFunction(function(){throw f;})};var e=function(f){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];this.isRejectionHandled_=!1;var m=this.createResolveAndReject_();
try{f(m.resolve,m.reject)}catch(h){m.reject(h)}};e.prototype.createResolveAndReject_=function(){function f(g){return function(l){h||(h=!0,g.call(m,l))}}var m=this,h=!1;return{resolve:f(this.resolveTo_),reject:f(this.reject_)}};e.prototype.resolveTo_=function(f){if(f===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(f instanceof e)this.settleSameAsPromise_(f);else{a:switch(typeof f){case "object":var m=null!=f;break a;case "function":m=!0;break a;default:m=!1}m?this.resolveToNonPromiseObj_(f):
this.fulfill_(f)}};e.prototype.resolveToNonPromiseObj_=function(f){var m=void 0;try{m=f.then}catch(h){this.reject_(h);return}"function"==typeof m?this.settleSameAsThenable_(m,f):this.fulfill_(f)};e.prototype.reject_=function(f){this.settle_(2,f)};e.prototype.fulfill_=function(f){this.settle_(1,f)};e.prototype.settle_=function(f,m){if(0!=this.state_)throw Error("Cannot settle("+f+", "+m+"): Promise already settled in state"+this.state_);this.state_=f;this.result_=m;2===this.state_&&this.scheduleUnhandledRejectionCheck_();
this.executeOnSettledCallbacks_()};e.prototype.scheduleUnhandledRejectionCheck_=function(){var f=this;d(function(){if(f.notifyUnhandledRejection_()){var m=$jscomp.global.console;"undefined"!==typeof m&&m.error(f.result_)}},1)};e.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var f=$jscomp.global.CustomEvent,m=$jscomp.global.Event,h=$jscomp.global.dispatchEvent;if("undefined"===typeof h)return!0;"function"===typeof f?f=new f("unhandledrejection",{cancelable:!0}):
"function"===typeof m?f=new m("unhandledrejection",{cancelable:!0}):(f=$jscomp.global.document.createEvent("CustomEvent"),f.initCustomEvent("unhandledrejection",!1,!0,f));f.promise=this;f.reason=this.result_;return h(f)};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var f=0;f<this.onSettledCallbacks_.length;++f)k.asyncExecute(this.onSettledCallbacks_[f]);this.onSettledCallbacks_=null}};var k=new a;e.prototype.settleSameAsPromise_=function(f){var m=this.createResolveAndReject_();
f.callWhenSettled_(m.resolve,m.reject)};e.prototype.settleSameAsThenable_=function(f,m){var h=this.createResolveAndReject_();try{f.call(m,h.resolve,h.reject)}catch(g){h.reject(g)}};e.prototype.then=function(f,m){function h(p,q){return"function"==typeof p?function(t){try{g(p(t))}catch(r){l(r)}}:q}var g,l,n=new e(function(p,q){g=p;l=q});this.callWhenSettled_(h(f,g),h(m,l));return n};e.prototype.catch=function(f){return this.then(void 0,f)};e.prototype.callWhenSettled_=function(f,m){function h(){switch(g.state_){case 1:f(g.result_);
break;case 2:m(g.result_);break;default:throw Error("Unexpected state: "+g.state_);}}var g=this;null==this.onSettledCallbacks_?k.asyncExecute(h):this.onSettledCallbacks_.push(h);this.isRejectionHandled_=!0};e.resolve=c;e.reject=function(f){return new e(function(m,h){h(f)})};e.race=function(f){return new e(function(m,h){for(var g=$jscomp.makeIterator(f),l=g.next();!l.done;l=g.next())c(l.value).callWhenSettled_(m,h)})};e.all=function(f){var m=$jscomp.makeIterator(f),h=m.next();return h.done?c([]):new e(function(g,
l){function n(t){return function(r){p[t]=r;q--;0==q&&g(p)}}var p=[],q=0;do p.push(void 0),q++,c(h.value).callWhenSettled_(n(p.length-1),l),h=m.next();while(!h.done)})};return e},"es6","es3");$jscomp.findInternal=function(b,a,c){b instanceof String&&(b=String(b));for(var d=b.length,e=0;e<d;e++){var k=b[e];if(a.call(c,k,e,b))return{i:e,v:k}}return{i:-1,v:void 0}};$jscomp.polyfill("Array.prototype.find",function(b){return b?b:function(a,c){return $jscomp.findInternal(this,a,c).v}},"es6","es3");
$jscomp.polyfill("Object.is",function(b){return b?b:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}},"es6","es3");$jscomp.polyfill("Array.prototype.includes",function(b){return b?b:function(a,c){var d=this;d instanceof String&&(d=String(d));var e=d.length;c=c||0;for(0>c&&(c=Math.max(c+e,0));c<e;c++){var k=d[c];if(k===a||Object.is(k,a))return!0}return!1}},"es7","es3");
$jscomp.checkStringArgs=function(b,a,c){if(null==b)throw new TypeError("The 'this' value for String.prototype."+c+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+c+" must not be a regular expression");return b+""};$jscomp.polyfill("String.prototype.includes",function(b){return b?b:function(a,c){return-1!==$jscomp.checkStringArgs(this,a,"includes").indexOf(a,c||0)}},"es6","es3");
$jscomp.polyfill("Array.from",function(b){return b?b:function(a,c,d){c=null!=c?c:function(m){return m};var e=[],k="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];if("function"==typeof k){a=k.call(a);for(var f=0;!(k=a.next()).done;)e.push(c.call(d,k.value,f++))}else for(k=a.length,f=0;f<k;f++)e.push(c.call(d,a[f],f));return e}},"es6","es3");
$jscomp.checkEs6ConformanceViaProxy=function(){try{var b={},a=Object.create(new $jscomp.global.Proxy(b,{get:function(c,d,e){return c==b&&"q"==d&&e==a}}));return!0===a.q}catch(c){return!1}};$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1;$jscomp.ES6_CONFORMANCE=$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&$jscomp.checkEs6ConformanceViaProxy();$jscomp.owns=function(b,a){return Object.prototype.hasOwnProperty.call(b,a)};
$jscomp.polyfill("WeakMap",function(b){function a(){if(!b||!Object.seal)return!1;try{var g=Object.seal({}),l=Object.seal({}),n=new b([[g,2],[l,3]]);if(2!=n.get(g)||3!=n.get(l))return!1;n.delete(g);n.set(l,4);return!n.has(g)&&4==n.get(l)}catch(p){return!1}}function c(){}function d(g){var l=typeof g;return"object"===l&&null!==g||"function"===l}function e(g){if(!$jscomp.owns(g,f)){var l=new c;$jscomp.defineProperty(g,f,{value:l})}}function k(g){if(!$jscomp.ISOLATE_POLYFILLS){var l=Object[g];l&&(Object[g]=
function(n){if(n instanceof c)return n;Object.isExtensible(n)&&e(n);return l(n)})}}if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(a())return b;var f="$jscomp_hidden_"+Math.random();k("freeze");k("preventExtensions");k("seal");var m=0,h=function(g){this.id_=(m+=Math.random()+1).toString();if(g){g=$jscomp.makeIterator(g);for(var l;!(l=g.next()).done;)l=l.value,this.set(l[0],l[1])}};h.prototype.set=function(g,l){if(!d(g))throw Error("Invalid WeakMap key");
e(g);if(!$jscomp.owns(g,f))throw Error("WeakMap key fail: "+g);g[f][this.id_]=l;return this};h.prototype.get=function(g){return d(g)&&$jscomp.owns(g,f)?g[f][this.id_]:void 0};h.prototype.has=function(g){return d(g)&&$jscomp.owns(g,f)&&$jscomp.owns(g[f],this.id_)};h.prototype.delete=function(g){return d(g)&&$jscomp.owns(g,f)&&$jscomp.owns(g[f],this.id_)?delete g[f][this.id_]:!1};return h},"es6","es3");$jscomp.MapEntry=function(){};
$jscomp.polyfill("Map",function(b){function a(){if($jscomp.ASSUME_NO_NATIVE_MAP||!b||"function"!=typeof b||!b.prototype.entries||"function"!=typeof Object.seal)return!1;try{var h=Object.seal({x:4}),g=new b($jscomp.makeIterator([[h,"s"]]));if("s"!=g.get(h)||1!=g.size||g.get({x:4})||g.set({x:4},"t")!=g||2!=g.size)return!1;var l=g.entries(),n=l.next();if(n.done||n.value[0]!=h||"s"!=n.value[1])return!1;n=l.next();return n.done||4!=n.value[0].x||"t"!=n.value[1]||!l.next().done?!1:!0}catch(p){return!1}}
if($jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(b&&$jscomp.ES6_CONFORMANCE)return b}else if(a())return b;var c=new WeakMap,d=function(h){this.data_={};this.head_=f();this.size=0;if(h){h=$jscomp.makeIterator(h);for(var g;!(g=h.next()).done;)g=g.value,this.set(g[0],g[1])}};d.prototype.set=function(h,g){h=0===h?0:h;var l=e(this,h);l.list||(l.list=this.data_[l.id]=[]);l.entry?l.entry.value=g:(l.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:h,value:g},l.list.push(l.entry),
this.head_.previous.next=l.entry,this.head_.previous=l.entry,this.size++);return this};d.prototype.delete=function(h){h=e(this,h);return h.entry&&h.list?(h.list.splice(h.index,1),h.list.length||delete this.data_[h.id],h.entry.previous.next=h.entry.next,h.entry.next.previous=h.entry.previous,h.entry.head=null,this.size--,!0):!1};d.prototype.clear=function(){this.data_={};this.head_=this.head_.previous=f();this.size=0};d.prototype.has=function(h){return!!e(this,h).entry};d.prototype.get=function(h){return(h=
e(this,h).entry)&&h.value};d.prototype.entries=function(){return k(this,function(h){return[h.key,h.value]})};d.prototype.keys=function(){return k(this,function(h){return h.key})};d.prototype.values=function(){return k(this,function(h){return h.value})};d.prototype.forEach=function(h,g){for(var l=this.entries(),n;!(n=l.next()).done;)n=n.value,h.call(g,n[1],n[0],this)};d.prototype[Symbol.iterator]=d.prototype.entries;var e=function(h,g){var l=g&&typeof g;"object"==l||"function"==l?c.has(g)?l=c.get(g):
(l=""+ ++m,c.set(g,l)):l="p_"+g;var n=h.data_[l];if(n&&$jscomp.owns(h.data_,l))for(h=0;h<n.length;h++){var p=n[h];if(g!==g&&p.key!==p.key||g===p.key)return{id:l,list:n,index:h,entry:p}}return{id:l,list:n,index:-1,entry:void 0}},k=function(h,g){var l=h.head_;return $jscomp.iteratorPrototype(function(){if(l){for(;l.head!=h.head_;)l=l.previous;for(;l.next!=l.head;)return l=l.next,{done:!1,value:g(l)};l=null}return{done:!0,value:void 0}})},f=function(){var h={};return h.previous=h.next=h.head=h},m=0;
return d},"es6","es3");var query=document.querySelector.bind(document),queryAll=document.querySelectorAll.bind(document),fromId=document.getElementById.bind(document),fromClass=document.getElementsByClassName.bind(document),fromTag=document.getElementsByTagName.bind(document),JoeUtils=function(){};JoeUtils.changeURLArg=function(b,a,c){c=a+"="+c;return b.match(a+"=([^&]*)")?b.replace(eval("/("+a+"=)([^&]*)/gi"),c):b.match("[?]")?b+"&"+c:b+"?"+c};
var Lb=function(b){this.lbBox=document.getElementById(b.id);this.lbItems=this.lbBox.querySelectorAll(".lb-item");this.lbSigns=this.lbBox.querySelectorAll(".lb-sign li");this.lbCtrlL=this.lbBox.querySelectorAll(".lb-ctrl")[0];this.lbCtrlR=this.lbBox.querySelectorAll(".lb-ctrl")[1];this.curIndex=0;this.numItems=this.lbItems.length;this.status=!0;this.speed=b.speed||600;this.delay=b.delay||3E3;this.direction=b.direction||"left";this.moniterKeyEvent=b.moniterKeyEvent||!1;this.moniterTouchEvent=b.moniterTouchEvent||
!1;this.handleEvents();this.setTransition()};Lb.prototype.start=function(){var b={srcElement:"left"===this.direction?this.lbCtrlR:this.lbCtrlL},a=this.clickCtrl.bind(this);this.interval=setInterval(a,this.delay,b)};Lb.prototype.pause=function(){clearInterval(this.interval)};Lb.prototype.setTransition=function(){var b=document.createElement("style");document.head.appendChild(b);b.sheet.insertRule(".lb-item {transition: left "+this.speed+"ms ease-in-out}",0)};
Lb.prototype.clickCtrl=function(b){if(this.status){this.status=!1;if(b.srcElement===this.lbCtrlR){b=this.curIndex;var a=(this.curIndex+1)%this.numItems;var c="left"}else b=this.curIndex,a=(this.curIndex+this.numItems-1)%this.numItems,c="right";this.slide(b,a,c);this.curIndex=a}};Lb.prototype.clickSign=function(b){if(this.status){this.status=!1;var a=this.curIndex;b=parseInt(b.srcElement.getAttribute("slide-to"));this.slide(a,b,a<b?"left":"right");this.curIndex=b}};
Lb.prototype.touchScreen=function(b){if("touchstart"===b.type)this.startX=b.touches[0].pageX,this.startY=b.touches[0].pageY;else{this.endX=b.changedTouches[0].pageX;this.endY=b.changedTouches[0].pageY;b=this.endX-this.startX;var a=this.startY-this.endY,c=Math.abs(180*Math.atan2(a,b)/Math.PI);10>Math.abs(b)||10>Math.abs(a)||(0<=c&&45>=c?this.lbCtrlL.click():135<=c&&180>=c&&this.lbCtrlR.click())}};Lb.prototype.keyDown=function(b){b&&37===b.keyCode?this.lbCtrlL.click():b&&39===b.keyCode&&this.lbCtrlR.click()};
Lb.prototype.handleEvents=function(){this.lbBox.addEventListener("mouseleave",this.start.bind(this),{passive:!0});this.lbBox.addEventListener("mouseover",this.pause.bind(this),{passive:!0});this.lbCtrlL.addEventListener("click",this.clickCtrl.bind(this));this.lbCtrlR.addEventListener("click",this.clickCtrl.bind(this));for(var b=0;b<this.lbSigns.length;b++)this.lbSigns[b].setAttribute("slide-to",b),this.lbSigns[b].addEventListener("click",this.clickSign.bind(this));this.moniterKeyEvent&&document.addEventListener("keydown",
this.keyDown.bind(this));this.moniterTouchEvent&&(this.lbBox.addEventListener("touchstart",this.touchScreen.bind(this),{passive:!0}),this.lbBox.addEventListener("touchend",this.touchScreen.bind(this),{passive:!0}))};
Lb.prototype.slide=function(b,a,c){var d=this;if("left"===c){this.lbItems[a].className="lb-item next";var e="lb-item active left";var k="lb-item next left"}else this.lbItems[a].className="lb-item prev",e="lb-item active right",k="lb-item prev right";this.lbSigns[b].className="";this.lbSigns[a].className="active";setTimeout(function(){d.lbItems[b].className=e;d.lbItems[a].className=k}.bind(this),50);setTimeout(function(){d.lbItems[b].className="lb-item";d.lbItems[a].className="lb-item active";d.status=
!0}.bind(this),this.speed+50)};
(function(){var b=function(a){this.options=a={reloadTime:a.reloadTime||1500};this.video_page=0;this.video_canLoad=!0;this.wallpaper_page=0;this.wallpaper_cid="";this.global_item={Jheader:query("header.j-header"),above:$("header .above"),above_nav:$(".above .above-nav"),below:$("header .below"),color_mode_toggle_btn:$(".js-promo-color-modes-toggle"),j_nav_link:$("nav.nav.j-nav a.link")};this.global_var={};this.init()};b.prototype.pjax_complete=function(){$(window).unbind("scroll");$(document).unbind("click");
this.init();this.reinit_head_title();jQuery('[data-fancybox="gallery"]').fancybox()};b.prototype.global_init=function(){$(document).on("touchstart",function(a){});$.fancybox.defaults.hash=!1;this.init_header();this.init_prefer_color_scheme();this.init_url_hash();this.init_document_title();this.init_document_barrager();this.init_document_progress();this.init_lazy_load();this.init_document_live2d();this.init_document_contextmenu();this.init_document_theme();this.init_hover_music();this.init_back_top();
this.init_document_console();this.init_document_weather();this.init_3d_tag();this.init_load_more();this.init_document_swiper();this.init_life_time();this.init_aside_reply();this.init_drop_down();this.init_aside_config();this.init_sign_verify();this.init_pagination_hash();this.init_wap_search_click();this.init_search_verify();this.init_wap_cloud();this.init_wap_search();this.init_wap_sidebar();this.init_wow();this.init_j_tabs();this.init_j_collapse();this.init_aside_motto();this.init_mobinav()};b.prototype.post_init=
function(){this.reward_init();this.init_head_title();this.init_high_light();this.init_markdown();this.init_document_analysis();this.init_owo();this.init_replay_see();this.init_draw();this.init_admire();this.init_thumbs_up();this.init_share_code();this.init_copy();this.init_synth();this.init_typecho_comment();this.init_baidu_collect();this.init_typing();this.init_floor_click();this.init_replay_content();this.init_comment();this.init_protect_verify();this.init_comment_submit();this.init_comment_like();
this.init_dynamic_reply();this.init_video_album();this.init_jfloor()};b.prototype.page_init=function(){this.post_init();this.init_navigation();this.init_file_toggle();this.init_leaving();this.init_dynamic_verify();this.init_video_list_type();this.init_video_list();this.init_video_search();this.init_load_more_video();this.init_video_detail();this.init_wallpaper();this.init_huya_type();this.init_huya_skip();this.init_huya_pagination()};b.prototype.init=function(){this.global_init();"post"===window.JOE_CONFIG.ARCHIVE?
this.post_init():"resources"===window.JOE_CONFIG.ARCHIVE?this.init_resource_page():this.page_init()};b.prototype.reinit_head_title=function(){$("#post_top_title").addClass("post_no");this.global_item.above.stop(!0).show();this.global_item.above_nav.stop(!0).removeClass("post_no");this.global_item.below.stop(!0).show()};b.prototype.changeURLArg=function(a,c,d){d=c+"="+d;return a.match(c+"=([^&]*)")?a.replace(eval("/("+c+"=)([^&]*)/gi"),d):a.match("[?]")?a+"&"+d:a+"?"+d};b.prototype.init_header=function(){this.global_item.j_nav_link.unbind("click").bind("click",
function(a){$(this).siblings().removeClass("active");$(this).addClass("active")})};b.prototype.reward_init=function(){if(!document.querySelector("#div_reward")){var a=document.querySelector(".handle .item-reward");null!==a&&(a.style.display="none")}};b.prototype.init_url_hash=function(){var a=new URLSearchParams(location.search);if(a.get("jscroll")&&0<$("#"+a.get("jscroll")).length)var c=setTimeout(function(){window.scroll({top:$("#"+a.get("jscroll")).offset().top-($(".j-header").height()+20),behavior:"smooth"});
clearTimeout(c)},300)};b.prototype.init_document_title=function(){if(""!==window.JOE_CONFIG.DOCUMENT_TITLE&&"on"!==window.JOE_CONFIG.IS_MOBILE){var a=document.title;$(document).on("visibilitychange",function(){document.title="hidden"===document.visibilityState?window.JOE_CONFIG.DOCUMENT_TITLE:a})}};b.prototype.init_document_barrager=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_BARRAGER){var a=$("#barrager");"on"===localStorage.getItem("barragerStatus")?(a.attr("checked",!0),$(".j-barrager").css({opacity:1,
visibility:"visible"})):(a.attr("checked",!1),$(".j-barrager").css({opacity:0,visibility:"hidden"}));a.on("change",function(){localStorage.setItem("barragerStatus",$(this).prop("checked")?"on":"off");a.prop("checked")?$(".j-barrager").css({opacity:1,visibility:"visible"}):$(".j-barrager").css({opacity:0,visibility:"hidden"})})}};b.prototype.init_document_progress=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_PROGRESS){var a=function(){var c=$(window).scrollTop(),d=$(document).height(),e=$(window).height();
c=parseInt(c/(d-e)*100);0>c&&(c=0);100<c&&(c=100);$("#progress").css("width",c+"%")};a();$(window).on("scroll",function(){return a()})}};b.prototype.init_document_live2d=function(){"off"!==window.JOE_CONFIG.DOCUMENT_LIVE2D&&"on"!==window.JOE_CONFIG.IS_MOBILE&&L2Dwidget.init({model:{jsonPath:window.JOE_CONFIG.DOCUMENT_LIVE2D,scale:1},mobile:{show:!1},display:{position:"right",width:160,height:200,hOffset:70,vOffset:0}})};b.prototype.init_document_contextmenu=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_CONTEXTMENU&&
"on"!==window.JOE_CONFIG.IS_MOBILE)$(document).on("contextmenu",function(){return!1})};b.prototype.init_document_theme=function(){if("on"===window.JOE_CONFIG.DOCUMENT_THEME_STATUS){var a=$("#colorPick");window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME?$("body").css("--theme",localStorage.getItem("--theme")||window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME):$("body").css("--theme",localStorage.getItem("--theme")||"#4770db");var c=null;c=localStorage.getItem("--theme")?localStorage.getItem("--theme"):window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME?
window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME:"#4770db";a.colpick({flat:!0,layout:"hex",submit:!1,color:c,colorScheme:"dark",onChange:function(d,e,k){$("body").css("--theme","#"+e);localStorage.setItem("--theme","#"+e)}});$("#openColorPick").unbind("click").bind("click",function(d){d.stopPropagation();a.toggleClass("active")});a.unbind("click").bind("click",function(d){d.stopPropagation()});$(document).bind("click",function(d){a.removeClass("active")})}else""===window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME?$("body").css("--theme",
"#4770db"):$("body").css("--theme",window.JOE_CONFIG.DOCUMENT_GLOBAL_THEME)};b.prototype.init_hover_music=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_HOVER_MUSIC&&"on"!==window.JOE_CONFIG.IS_MOBILE)$(".j-hover-music").on("mouseover",function(){$("#j-hover-music").attr("src",window.JOE_CONFIG.THEME_URL+"/assets/audio/"+(Math.floor(8*Math.random())+1)+".ogv")})};b.prototype.init_back_top=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_BACK_TOP){var a=function(){500<$(window).scrollTop()?$("#backToTop").addClass("active"):
$("#backToTop").removeClass("active")};a();$(window).on("scroll",function(){return a()});$("#backToTop").unbind("click").bind("click",function(){window.scroll({top:0,behavior:"smooth"})})}};b.prototype.init_high_light=function(){"off"!==window.JOE_CONFIG.DOCUMENT_HIGHT_LIGHT&&(hljs.initHighlighting.called=!1,hljs.initHighlighting())};b.prototype.init_document_console=function(){"off"!==window.JOE_CONFIG.DOCUMENT_CONSOLE&&function(a,c){a||(!function(d){var e=e||{};e.create=function(k){function f(){window.Firebug&&
window.Firebug.chrome&&window.Firebug.chrome.isInitialized?m("on"):(l="off",console.log(n),console.clear(),m(l))}function m(r){p!==r&&(p=r,"function"==typeof g.onchange&&g.onchange(r))}"function"==typeof k&&(k={onchange:k});var h=(k=k||{}).delay||500,g={};g.onchange=k.onchange;var l,n=new Image;n.__defineGetter__("id",function(){l="on"});var p="unknown";g.getStatus=function(){return p};var q=setInterval(f,h);window.addEventListener("resize",f);var t;return g.free=function(){t||(t=!0,window.removeEventListener("resize",
f),clearInterval(q))},g};"function"==typeof define?(define.amd||define.cmd)&&define(function(){return e}):"undefined"!=typeof module&&module.exports?module.exports=e:window.jdetects=e}(),jdetects.create(function(d){var e=0;setInterval(function(){"on"===d&&setTimeout(function(){0===e&&(e=1,setTimeout(c))},200)},100)}))}(!1,function(){window.location.href=window.JOE_CONFIG.THEME_URL+"/console.html"})};b.prototype.init_document_weather=function(){if(""!==window.JOE_CONFIG.DOCUMENT_WEATHER_KEY){window.WIDGET=
{CONFIG:{layout:2,width:"220",height:"270",background:"auto"===window.JOE_CONFIG.DOCUMENT_WEATHER_TYPE?1:2,dataColor:"auto"===window.JOE_CONFIG.DOCUMENT_WEATHER_TYPE?"ffffff":"303133",key:window.JOE_CONFIG.DOCUMENT_WEATHER_KEY}};var a=setTimeout(function(){$(".aside-wether .loading").addClass("active");clearTimeout(a)},1E3)}};b.prototype.init_3d_tag=function(){if("off"!==window.JOE_CONFIG.DOCUMENT_3D_TAG){var a=[];$("#cloudList li").each(function(c,d){a.push({label:$(d).attr("data-label"),url:$(d).attr("data-url"),
target:"_blank"})});$("#cloud").svg3DTagCloud({entries:a,width:220,height:230,radius:"65%",radiusMin:75,bgDraw:!0,bgColor:"#000",opacityOver:1,opacityOut:.05,opacitySpeed:6,fov:800,speed:.5,fontSize:13,fontColor:"#fff",fontWeight:"500",fontStyle:"normal",fontStretch:"normal",fontToUpperCase:!0})}};b.prototype.init_load_more=function(){if("ajax"===window.JOE_CONFIG.DOCUMENT_LOAD_MORE){var a=$(".j-loadmore a");a.attr("data-href",a.attr("href"));a.removeAttr("href");a.unbind("click").bind("click",function(){var c=
this;if(!$(this).attr("disabled")){$(this).html("loading...");$(this).attr("disabled",!0);var d=$(this).attr("data-href");d&&$.ajax({url:d,type:"get",success:function(e){$(c).removeAttr("disabled");$(c).html("\u67e5\u770b\u66f4\u591a");var k=$(e).find(".article-list:not(.sticky)");$(".j-index-article.article").append(k);window.scroll({top:$(k).first().offset().top-($(".j-header").height()+20),behavior:"smooth"});(e=$(e).find(".j-loadmore a").attr("href"))?$(c).attr("data-href",e):$(".j-loadmore").remove()}})}})}};
b.prototype.init_document_swiper=function(){"off"!==window.JOE_CONFIG.DOCUMENT_SWIPER&&document.querySelector("#lb-1")&&(new Lb({id:"lb-1",speed:1E3,delay:5E3,direction:"left",moniterKeyEvent:!0,moniterTouchEvent:!0})).pause()};b.prototype.init_document_analysis=function(){if(0!==$("#j-video").length){var a=$("#j-dplayer"),c=$("#j-video .episodes ul li");a.attr("src",a.attr("data-src")+c.first().attr("data-url"));c.first().addClass("active");$("#j-video .player-box .title span").html("\u6b63\u5728\u64ad\u653e\uff1a"+
$("#j-video .episodes ul li span").first().html());c.unbind("click").bind("click",function(){c.removeClass("active");$(this).addClass("active");a.attr("src",a.attr("data-src")+$(this).attr("data-url"));$("#j-video .player-box .title span").html("\u6b63\u5728\u64ad\u653e\uff1a"+$(this).find("span").html())})}};b.prototype.init_owo=function(){0!==$("#OwO_Container").length&&(new OwO({logo:"O\u03c9O\u8868\u60c5",container:document.getElementsByClassName("OwO")[0],target:document.getElementsByClassName("OwO-textarea")[0],
api:window.JOE_CONFIG.THEME_URL+"/OwO.json",position:"down",width:"100%",maxHeight:"250px"}),$(document).bind("click",function(){$(".OwO").removeClass("OwO-open")}))};b.prototype.init_replay_see=function(){$(".need-reply span").unbind("click").bind("click",function(){var a=$(this).attr("data-href");window.scrollTo({top:$("#"+a).offset().top-($(".j-header").height()+20),behavior:"smooth"})})};b.prototype.init_draw=function(){0!==$("#draw").length&&(window.sketchpad=new Sketchpad({element:"#draw",height:300,
penSize:5,color:"303133"}),$("#commentTypeContent .undo").unbind("click").bind("click",function(){window.sketchpad.undo()}),$("#commentTypeContent .animate").unbind("click").bind("click",function(){window.sketchpad.animate(10)}),$("#commentTypeContent .canvas ul li").unbind("click").bind("click",function(){window.sketchpad.penSize=$(this).attr("data-line");$("#commentTypeContent .canvas ul li").removeClass("active");$(this).addClass("active")}),$("#commentTypeContent .canvas ol li").unbind("click").bind("click",
function(){window.sketchpad.color=$(this).attr("data-color");$("#commentTypeContent .canvas ol li").removeClass("active");$(this).addClass("active")}))};b.prototype.init_admire=function(){$("#j-admire").unbind("click").bind("click",function(){$(".j-admire-modal").addClass("active");$("body").css("overflow","hidden")});$(".j-admire-modal .close").unbind("click").bind("click",function(){$(".j-admire-modal").removeClass("active");$("body").css("overflow","")})};b.prototype.init_thumbs_up=function(){$("#j-thumbs-up").unbind("click").bind("click",
function(){if($(this).attr("disabled"))return $.toast({type:"warning",message:"\u672c\u7bc7\u6587\u7ae0\u60a8\u5df2\u7ecf\u8d5e\u8fc7~"});$(this).find("span").html("loading...");$.ajax({type:"post",url:$(this).attr("data-url"),data:"agree="+$(this).attr("data-cid"),timeout:3E4,cache:!1,success:function(a){/\d/.test(a)&&$("#j-thumbs-up span").html("\u8d5e \u00b7 "+a.trim());$.toast({type:"success",message:"\u611f\u8c22\u60a8\u7684\u70b9\u8d5e\uff01"});$("#j-thumbs-up").attr("disabled","disabled")}})})};
b.prototype.init_share_code=function(){var a=$("#j-share-code");0!==a.length&&a.qrcode({render:"canvas",width:90,height:90,text:encodeURI(window.location.href),background:"#ffffff",foreground:"#000000",correctLevel:0})};b.prototype.init_copy=function(){var a=$("#copyInput");$(".j-copy").unbind("click").bind("click",function(c){c.preventDefault();$("body").append('<input id="copyInput" value="'+$(this).attr("data-copy")+'"/>');a.select();document.execCommand("copy");$.toast({type:"success",message:"\u5df2\u590d\u5236\u5230\u526a\u5207\u677f\u4e2d~"});
a.remove()})};b.prototype.init_synth=function(){var a=$("#read");if(!window.speechSynthesis)return a.remove();a.unbind("click").bind("click",function(){var c=window.speechSynthesis,d=new SpeechSynthesisUtterance;"\u6717\u8bfb"===$(this).find("span").html()?(d.lang="zh-CN",d.text=$("#markdown").text(),c.speak(d),$(this).find("span").html("\u505c\u6b62\u6717\u8bfb")):(c.cancel(d),$(this).find("span").html("\u6717\u8bfb"))})};b.prototype.init_typecho_comment=function(){window.TypechoComment={dom:function(a){return document.getElementById(a)},
create:function(a,c){a=document.createElement(a);for(var d in c)a.setAttribute(d,c[d]);return a},reply:function(a,c){var d=this.dom(a),e=this.dom($(".j-comment").attr("data-respondid")),k=this.dom("comment-parent"),f="form"===e.tagName?e:e.getElementsByTagName("form")[0],m=e.getElementsByTagName("textarea")[0];null==k&&(k=this.create("input",{type:"hidden",name:"parent",id:"comment-parent"}),f.appendChild(k));k.setAttribute("value",c);null==this.dom("comment-form-place-holder")&&(c=this.create("div",
{id:"comment-form-place-holder"}),e.parentNode.insertBefore(c,e));0===$(d).find(e).length&&d.appendChild(e);this.dom("cancel-comment-reply-link").style.display="";null!=m&&"text"==m.name&&window.scroll({top:$("#li-"+a).offset().top-($(".j-header").height()+20),behavior:"smooth"});return!1},cancelReply:function(){var a=this.dom($(".j-comment").attr("data-respondid")),c=this.dom("comment-form-place-holder"),d=this.dom("comment-parent");null!=d&&d.parentNode.removeChild(d);if(null==c)return!0;this.dom("cancel-comment-reply-link").style.display=
"none";c.parentNode.insertBefore(a,c);window.scroll({top:$("#comments").offset().top-($(".j-header").height()+20),behavior:"smooth"});return!1}}};b.prototype.init_markdown=function(){$("#markdown a:not(a[no-target])").attr({target:"_blank"});$("#markdown img:not(img.owo)").each(function(){var c=document.createElement("a");$(c).attr("data-fancybox","gallery");$(c).attr("href",$(this).attr("data-src")||$(this).attr("src"));$(this).wrap(c)});var a=$("code.hljs");a.parent().addClass("hljs-pre");a.each(function(){$(this).html("<ol><li>"+
$(this).html().replace(/\n/g,"\n</li><li>")+"\n</li></ol>")})};b.prototype.init_baidu_collect=function(){var a=$("#baiduIncluded");0!==a.length&&$.ajax({url:window.JOE_CONFIG.THEME_URL+"/baiduRecord.php?url="+encodeURI(window.location.href),method:"get",success:function(c){c.success?"\u672a\u6536\u5f55"===c.data.baidu?""===window.JOE_CONFIG.DOCUMENT_BAIDU_TOKEN?a.html('<a target="_blank" href="https://ziyuan.baidu.com/linksubmit/url?sitename='+encodeURI(window.location.href)+'">\u672a\u6536\u5f55\uff0c\u53bb\u63d0\u4ea4</a>'):
$.ajax({url:window.JOE_CONFIG.THEME_URL+"/baiduPush.php?urls="+encodeURI(window.location.href),method:"get",dataType:"json",data:{token:window.JOE_CONFIG.DOCUMENT_BAIDU_TOKEN,domain:window.location.hostname},success:function(d){var e={"site error":"\u7ad9\u70b9\u672a\u9a8c\u8bc1\uff01","empty content":"\u5185\u5bb9\u4e3a\u7a7a\uff01","only 2000 urls are allowed once":"\u8d85\u8fc7\u9650\u5236\uff01","over quota":"\u4eca\u65e5\u63d0\u4ea4\u5df2\u4e0a\u9650"};d.success?(a.css("color","#3bca72"),a.html("\u63a8\u9001\u6210\u529f")):
(a.css("color","#e6a23c"),401===d.error?a.html("Token\u9519\u8bef\uff01"):400===d.error?a.html(e[d.message]||"\u672a\u77e5\u9519\u8bef"):404===d.error?a.html("\u5730\u5740\u9519\u8bef\uff01"):a.html("\u670d\u52a1\u5f02\u5e38\uff01"))}}):(a.html("\u767e\u5ea6\u5df2\u6536\u5f55"),a.css("color","#3bca72")):(a.html("\u67e5\u8be2\u5931\u8d25"),a.css("color","#f56c6c"))}})};b.prototype.init_typing=function(){$(".j-typing").each(function(a,c){$(c).show();$(c).css("opacity",1);var d=$(c).html(),e=null,k=
0,f=function(){k<=d.length?($(c).html(d.slice(0,k++)+"_"),e=setTimeout(f,100)):($(c).html(d),clearTimeout(e))};f()})};b.prototype.init_life_time=function(){function a(){var c=+new Date,d=(new Date((new Date).toLocaleDateString())).getTime();c=(c-d)/1E3/60/60;d=c/24*100;$("#dayProgress .title span").html(parseInt(c));$("#dayProgress .progress .progress-inner").css("width",parseInt(d)+"%");$("#dayProgress .progress .progress-percentage").html(parseInt(d)+"%");c={0:7,1:1,2:2,3:3,4:4,5:5,6:6}[(new Date).getDay()];
d=c/7*100;$("#weekProgress .title span").html(c);$("#weekProgress .progress .progress-inner").css("width",parseInt(d)+"%");$("#weekProgress .progress .progress-percentage").html(parseInt(d)+"%");var e=(new Date).getFullYear();d=(new Date).getDate();c=(new Date).getMonth()+1;e=(new Date(e,c,0)).getDate();e=d/e*100;$("#monthProgress .title span").html(d);$("#monthProgress .progress .progress-inner").css("width",parseInt(e)+"%");$("#monthProgress .progress .progress-percentage").html(parseInt(e)+"%");
d=c/12*100;$("#yearProgress .title span").html(c);$("#yearProgress .progress .progress-inner").css("width",parseInt(d)+"%");$("#yearProgress .progress .progress-percentage").html(parseInt(d)+"%")}a();setInterval(function(){a()},1E3)};b.prototype.init_aside_reply=function(){$("#asideReply a").each(function(a,c){a=$(c).html();/\{!\{.*/.test(a)?$(c).html("# \u56fe\u7247\u56de\u590d"):$(c).html(a);$(c).css("display","-webkit-box");$(c).attr("href").includes("#")&&$(c).attr("href",$(c).attr("href").replace("#",
"?jscroll="))})};b.prototype.init_file_toggle=function(){var a=$(".j-file .panel");a.first().next().slideToggle(0);a.unbind("click").bind("click",function(){var c=$(this).next();c.slideToggle(200);$(".j-file .panel-body").not(c).slideUp()})};b.prototype.init_floor_click=function(){"on"!==window.JOE_CONFIG.IS_MOBILE&&$(".j-floor a").unbind("click").bind("click",function(a){a.preventDefault();window.scroll({top:$($(this).attr("data-href")).offset().top-($(".j-header").height()+20),behavior:"smooth"})})};
b.prototype.init_drop_down=function(){$(".j-drop").unbind("click").bind("click",function(a){a.stopPropagation();$(this).siblings(".j-dropdown").hasClass("active")?$(this).siblings(".j-dropdown").removeClass("active"):($(".j-dropdown").removeClass("active"),$(this).siblings(".j-dropdown").addClass("active"))});$(document).bind("click",function(a){return $(".j-dropdown").removeClass("active")});$(".j-dropdown[stop-propagation]").unbind("click").bind("click",function(a){a.stopPropagation()})};b.prototype.init_aside_config=
function(){var a=$(".j-aside"),c=$(".j-header"),d=a.width();0<d&&($(".j-stretch").addClass("active"),a.css("width",d));$(".j-aside .aside").last().css("top",c.height()+20);$(".j-floor .contain").css("top",c.height()+20);var e=$(".j-stretch .contain");e.css("top",c.height()+20);e.unbind("click").bind("click",function(){0===a.width()?(a.css("width",d),a.css("overflow","")):(a.css("width",0),a.css("overflow","hidden"));$("#commentType button[data-type='text']").click()})};b.prototype.init_sign_verify=
function(){$("#loginForm").off("submit").on("submit",function(a){if(""===$("#loginForm .username").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"});if(""===$("#loginForm .password").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u5bc6\u7801\uff01"})});$("#registerForm").off("submit").on("submit",function(a){if(""===$("#registerForm .username").val().trim())return a.preventDefault(),$.toast({type:"warning",
message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d\uff01"});if(""===$("#registerForm .mail").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u90ae\u7bb1\uff01"});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($("#registerForm .mail").val()))return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"})})};b.prototype.init_pagination_hash=function(){$(".j-pagination a").each(function(a,c){$(c).attr("href")&&
$(c).attr("href").includes("#")&&$(c).attr("href",$(c).attr("href").replace("#","?jscroll="))})};b.prototype.init_replay_content=function(){$(".replyContent p").each(function(a,c){a=$(c).html();/\{!\{.*\}!\}/.test(a)&&(a=a.replace(/{!{/,"").replace(/}!}/,""),$(c).html('<img class="canvas" src="'+a+'" />'))});$(".replyContent").show()};b.prototype.init_comment=function(){$("#commentType button").unbind("click").bind("click",function(){$("#commentType button").removeClass("active");$(this).addClass("active");
var a=$("#commentTypeContent .canvas");"canvas"===$(this).attr("data-type")?($("#draw").prop("width",$("#commentTypeContent").width()),$("#commentTypeContent textarea").hide(),a.show(),a.attr("data-type","canvas")):($("#commentTypeContent textarea").show(),a.hide(),a.attr("data-type","text"))});$(".comment-list .meta a").unbind("click").bind("click",function(){$("#draw").prop("width",$("#commentTypeContent").width())});$("#cancel-comment-reply-link").unbind("click").bind("click",function(){$("#draw").prop("width",
$("#commentTypeContent").width())})};b.prototype.init_leaving=function(){function a(d,e){return Math.floor(Math.random()*(e-d+1))+d}var c=100;$("#j-leaving li").each(function(d,e){$(e).find(".body .content p").each(function(k,f){k=$(f).html();/\{!\{.*\}!\}/.test(k)&&(k=k.replace(/{!{/,"").replace(/}!}/,""),$(f).html('<img class="canvas" src="'+k+'" />'))});$(e).css({"z-index":a(1,99),"background-color":"rgba("+a(0,255)+", "+a(0,255)+", "+a(0,255)+", "+a(.8,1)+")",top:parseInt(Math.random()*($("#j-leaving").height()-
$(e).height()),10),left:parseInt(Math.random()*($("#j-leaving").width()-$(e).width()),10),display:"flex"});$(e).draggabilly({containment:!0});$(e).on("dragStart",function(k){c++;$(e).css("z-index",c)})})};b.prototype.init_wap_search_click=function(){$(".j-search-toggle").unbind("click").bind("click",function(){$(this).toggleClass("active");$(this).hasClass("active")?($(".j-nav").hide(),$(".j-search").css("display","flex")):($(".j-nav").css("display","flex"),$(".j-search").hide())})};b.prototype.init_search_verify=
function(){$(".j-search").off("submit").on("submit",function(a){if(""===$(".j-search input").val().trim())return a.preventDefault(),$.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u641c\u7d22\u5185\u5bb9\uff01"})})};b.prototype.init_protect_verify=function(){var a=this,c=$("#j-protected");c.off("submit").on("submit",function(d){d.preventDefault();if(""===c.find(".pass").val())return $.toast({type:"info",message:"\u8bf7\u8f93\u5165\u8bbf\u95ee\u5bc6\u7801\uff01"});d=c.attr("action");$.ajax({url:d,
method:"post",datatype:"text",data:{protectPassword:c.find(".pass").val(),cid:c.find(".cid").val()},success:function(e){var k=[],f="";k=$(e).contents();Array.from(k).forEach(function(h){"container"===h.parentNode.className&&(f=h)});if(/TypechoJoeTheme/.test(e)){var m=location.href;m=a.changeURLArg(m,"jscroll","comments");$.toast({type:"success",message:"\u5bc6\u7801\u6b63\u786e\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});setTimeout(function(){pjax.loadUrl(m)},a.options.reloadTime)}else $.toast({type:"warning",
message:f.textContent||""})}})})};b.prototype.init_dynamic_verify=function(){var a=this;$("#j-dynamic-form").off("submit").on("submit",function(c){var d=this;c.preventDefault();var e=$("#j-dynamic-form .form-foot button");if(""===$("#j-dynamic-form-text").val().trim())return $.toast({type:"info",message:"\u8bf7\u8f93\u5165\u53d1\u8868\u5185\u5bb9\uff01"});$(this).attr("data-disabled")||($(this).attr("data-disabled",!0),e.text("\u53d1\u8868\u4e2d..."),$.ajax({url:$(this).attr("action"),type:"post",
data:$(this).serializeArray(),success:function(k){var f=[],m="";f=$(k).contents();Array.from(f).forEach(function(g){"container"===g.parentNode.className&&(m=g)});if(/TypechoJoeTheme/.test(k)){var h=location.href;h=a.changeURLArg(h,"jscroll","comments");$.toast({type:"success",message:"\u53d1\u8868\u6210\u529f\uff01"});setTimeout(function(){pjax.loadUrl(h)},a.options.reloadTime)}else $.toast({type:"warning",message:m.textContent||""}),$(d).removeAttr("data-disabled");e.text("\u7acb\u5373\u53d1\u8868")},
error:function(k){e.text("\u7acb\u5373\u53d1\u8868")}}))})};b.prototype.init_comment_submit=function(){var a=this;$("#comment-form").off("submit").on("submit",function(c){var d=this;c.preventDefault();if(""===$("#comment-nick").val().trim())return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0\uff01"});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($("#comment-mail").val()))return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"});
c=$("#comment-content");if("canvas"===$("#commentTypeContent .canvas").attr("data-type")){var e=$("#draw")[0].toDataURL("image/webp",.1);c.val("{!{"+e+"}!} ")}if(""===c.val().trim())return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u8bc4\u8bba\u5185\u5bb9\uff01"});if(!$(this).attr("data-disabled")){$(this).attr("data-disabled",!0);$(this).find("button[type='submit']").html("\u8bf7\u7b49\u5f85...");var k=$(".comment-btn");k.text("\u8bc4\u8bba\u4e2d..");console.log($(this).attr("action"));
$.ajax({url:$(this).attr("action"),type:"post",data:$(this).serializeArray(),success:function(f){var m=[],h="";m=$(f).contents();Array.from(m).forEach(function(l){"container"===l.parentNode.className&&(h=l)});if(/TypechoJoeTheme/.test(f)){var g=location.href;g=a.changeURLArg(g,"jscroll","comments");$.toast({type:"success",message:"\u53d1\u9001\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});setTimeout(function(){pjax.loadUrl(g)},a.options.reloadTime)}else $.toast({type:"warning",message:h.textContent||
""}),$(d).removeAttr("data-disabled"),$(d).find("button[type='submit']").html("\u53d1\u8868\u8bc4\u8bba");k.text("\u53d1\u8868\u8bc4\u8bba")}})}})};b.prototype.init_wap_cloud=function(){var a=function(c,d){return Math.floor(Math.random()*(d-c+1))+c};$("#search-cloud a").each(function(c,d){$(d).css("background","rgba("+a(0,255)+", "+a(0,255)+", "+a(0,255)+", "+a(.8,1)+")")})};b.prototype.init_wap_search=function(){$(".search-toggle-xs").unbind("click").bind("click",function(){$(".j-slide").removeClass("active");
$(".j-sidebar-xs").removeClass("active");var a=$(".j-search-down-xs");a.toggleClass("active");a.hasClass("active")?($("body").css("overflow","hidden"),$(".j-header").css("box-shadow","none")):($("body").css("overflow",""),$(".j-header").css("box-shadow",""))});$(".j-search-down-xs .mask").unbind("click").bind("click",function(){$(".j-search-down-xs").removeClass("active");$("body").css("overflow","");$(".j-header").css("box-shadow","")})};b.prototype.init_wap_sidebar=function(){$(".j-slide").unbind("click").bind("click",
function(a){$(".j-search-down-xs").removeClass("active");$("body").css("overflow","");$(".j-header").css("box-shadow","");$(this).toggleClass("active");$(".j-sidebar-xs").toggleClass("active");$(this).hasClass("active")?$("body").css("overflow","hidden"):$("body").css("overflow","")});$(".j-sidebar-xs .mask").unbind("click").bind("click",function(){$(".j-slide").removeClass("active");$(".j-sidebar-xs").removeClass("active");$("body").css("overflow","")});$(".j-sidebar-xs .item ul li a").unbind("click").bind("click",
function(a){var c=$(this);c.parent().siblings(".active").toggleClass("active");if(c.next().is("ul")){if(c.parent().toggleClass("active")&&a.preventDefault())return!1}else $(".j-slide").removeClass("active"),$(".j-sidebar-xs").removeClass("active"),$("body").css("overflow","")})};b.prototype.init_wow=function(){"on"===window.JOE_CONFIG.IS_MOBILE&&"off"===window.JOE_CONFIG.DOCUMENT_WAP_ANIMATION||"off"===window.JOE_CONFIG.IS_MOBILE&&"off"===window.JOE_CONFIG.DOCUMENT_PC_ANIMATION||(new WOW({boxClass:"wow",
animateClass:"animated",offset:0,mobile:!0,live:!0,scrollContainer:null})).init()};b.prototype.init_video_list_type=function(){if(0!==$("#j-video-type").length){if(""===window.JOE_CONFIG.VIDEO_LIST_API)return $.toast({type:"warning",message:"\u82f9\u679cCMS API\u672a\u586b\u5199\uff01"});$(".j-video-load-1").show();$.ajax({url:window.JOE_CONFIG.VIDEO_LIST_API,method:"get",data:{ac:"list",at:"json"},dataType:"json",success:function(c){if(1!==c.code)return $.toast({type:"warning",message:"\u83b7\u53d6\u5217\u8868\u5931\u8d25\uff01"});
$(".j-video-load-1").hide();var d='<li class="active">\u5168\u90e8</li>',e=window.JOE_CONFIG.VIDEO_LIST_SHIELD.split("||").map(function(k){return k.trim()});c.class.forEach(function(k){e.some(function(f){return f===k.type_name})||(d+='<li data-id="'+k.type_id+'">'+k.type_name+"</li>")});$("#j-video-type").html(d)}});var a=this;$("#j-video-type li").unbind("click").bind("click",function(){$(this).addClass("active").siblings().removeClass("active");a.video_page=0;$("#j-video-list").html("");a.init_video_list($(this).attr("data-id"))})}};
b.prototype.init_video_list=function(a,c){if(0!==$("#j-video-list").length){var d=this;d.video_canLoad&&(d.video_canLoad=!1,d.video_page+=1,$(".j-video-load-2").show(),$.ajax({url:window.JOE_CONFIG.VIDEO_LIST_API,method:"get",data:{pg:d.video_page,ac:"videolist",at:"json",t:a,wd:c},dataType:"json",success:function(e){if(1===e.code){$(".j-video-load-2").hide();var k=window.location.href.match("[?]")?window.location.href+"&vod_id=":window.location.href+"?vod_id=";e.list.forEach(function(f){$("#j-video-list").append('\n                                <li>\n                                    <a href="'+
(k+f.vod_id)+'">\n                                        <img class="lazyload" src="'+window.JOE_CONFIG.DOCUMENT_LAZY_LOAD+'" data-src="'+f.vod_pic+'">\n                                        <h2>'+f.vod_name+"</h2>\n                                        "+(f.vod_year&&0!==f.vod_year?"<i>"+f.vod_year+"</i>":"")+"\n                                    </a>\n                                </li>\n                            ")});d.video_canLoad=!0}}}))}};b.prototype.init_video_search=function(){var a=
this;$("#j-video-search button").unbind("click").bind("click",function(){if(""===$("#j-video-search input").val().trim())return $.toast({type:"info",message:"\u8bf7\u8f93\u5165\u5185\u5bb9\uff01"});a.video_page=0;$("#j-video-list").html("");a.init_video_list(null,$("#j-video-search input").val())})};b.prototype.init_load_more_video=function(){var a=$("#j-video-list");if(0!==a.length){var c=this;$(window).on("scroll",function(){var d=$(window).scrollTop(),e=$(window).height(),k=a.offset().top+a.height();
d+e>=k&&c.init_video_list()})}};b.prototype.init_video_detail=function(){var a=(new URLSearchParams(window.location.search)).get("vod_id");a&&($(".j-video-load-3").show(),$.ajax({url:window.JOE_CONFIG.VIDEO_LIST_API,method:"get",data:{ac:"detail",at:"json",ids:a},dataType:"json",success:function(c){function d(p){p=p.split("$");return{name:p[0]||"",link:p[1]||""}}if(1!==c.code||1!==c.list.length)return $.toast({type:"warning",message:"\u6570\u636e\u83b7\u53d6\u5931\u8d25\uff01"});$(".j-video-load-3").hide();
c=c.list[0];$("#j-video-info").html('\n\t\t\t\t\t\t<div class="image">\n\t\t\t\t\t\t\t<img class="lazyload" src="'+window.JOE_CONFIG.DOCUMENT_LAZY_LOAD+'" alt="'+c.vod_name+'" data-src="'+c.vod_pic+'" title="'+c.vod_name+'">\n\t\t\t\t\t\t\t'+(c.vod_year&&0!==c.vod_year?"<i>"+c.vod_year+"</i>":"")+"\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<dl>\n\t\t\t\t\t\t\t<dt>"+(c.vod_name+(c.vod_remarks?" - "+c.vod_remarks:""))+"</dt>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u7c7b\u578b\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+
(c.vod_class||"\u672a\u77e5")+"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u4e3b\u6f14\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+(c.vod_actor||"\u672a\u77e5")+"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u5bfc\u6f14\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+(c.vod_director||"\u672a\u77e5")+"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t\t<dd>\n\t\t\t\t\t\t\t\t<span>\u7b80\u4ecb\uff1a</span>\n\t\t\t\t\t\t\t\t<span>"+(c.vod_content?c.vod_content:c.vod_blurb)+
"</span>\n\t\t\t\t\t\t\t</dd>\n\t\t\t\t\t\t</dl>\n\t\t\t\t\t");var e=c.vod_play_from.split("$$$"),k=c.vod_play_url.split("$$$"),f=new Map;e.forEach(function(p,q){f.set(p,k[q]||[])});e={};for(var m=$jscomp.makeIterator(f),h=m.next();!h.done;e={$jscomp$loop$prop$str$4:e.$jscomp$loop$prop$str$4},h=m.next()){var g=$jscomp.makeIterator(h.value);h=g.next().value;g=g.next().value.split("#");e.$jscomp$loop$prop$str$4="";g.forEach(function(p){return function(q){p.$jscomp$loop$prop$str$4+='\n\t\t\t\t\t\t\t\t<li data-link="'+
d(q).link+'">'+d(q).name+"</li>\n\t\t\t\t\t\t\t"}}(e));$("#j-video-play").append('\n\t\t\t\t\t\t\t<div class="video-list-play">\n\t\t\t\t\t\t\t\t<div class="title">\u6e90\uff1a'+h+'</div>\n\t\t\t\t\t\t\t\t<ul class="list-item">\n\t\t\t\t\t\t\t\t\t'+e.$jscomp$loop$prop$str$4+"\n\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t")}var l=$("#j-video-player iframe");if(l.attr("data-src")&&""!==l.attr("data-src")&&($(".video-list-play .list-item li").unbind("click").bind("click",function(){$(".video-list-play .list-item li").removeClass("active");
$(this).addClass("active");l.attr("src",l.attr("data-src")+$(this).attr("data-link"));sessionStorage.setItem("playUrl",$(this).attr("data-link"))}),e=$("#j-video-play .video-list-play:first-child .list-item li:first-child"),0!==e.length)){if(sessionStorage.getItem("playUrl")){var n=null;$(".video-list-play .list-item li").each(function(p,q){$(q).attr("data-link")===sessionStorage.getItem("playUrl")&&($(q).addClass("active"),n=!0)});!0===n?l.attr("src",l.attr("data-src")+sessionStorage.getItem("playUrl")):
(l.attr("src",l.attr("data-src")+e.attr("data-link")),e.addClass("active"))}else l.attr("src",l.attr("data-src")+e.attr("data-link")),e.addClass("active");$("#j-video-player-title").html("\u6b63\u5728\u64ad\u653e\uff1a"+c.vod_name)}}}))};b.prototype.init_j_tabs=function(){$(".j-tabs .nav span").unbind("click").bind("click",function(){var a=$(this).attr("data-panel");$(this).addClass("active").siblings().removeClass("active");$(this).parents(".j-tabs").find(".content div").hide();$(this).parents(".j-tabs").find(".content div[data-panel="+
a+"]").show()})};b.prototype.init_j_collapse=function(){$(".j-collapse .collapse-head").unbind("click").bind("click",function(){var a=$(this).next();a.slideToggle(200);$(".j-collapse .collapse-body").not(a).slideUp()})};b.prototype.init_aside_motto=function(){var a=$(".j-aside-motto");"on"===window.JOE_CONFIG.DOCUMENT_ASIDE_MOTTO?a.show():$.ajax({url:window.JOE_CONFIG.DOCUMENT_MOTTO_API,method:"get",dataType:"text",success:function(c){$(".j-aside-motto").html(c);$(".j-aside-motto").show()},error:function(c){$(".j-aside-motto").html("\u4eba\u751f\u4e4b\u8def\uff0c\u96be\u514d\u574e\u5777\uff0c\u4f46\u6211\u6267\u7740");
$(".j-aside-motto").show()}})};b.prototype.init_comment_like=function(){$(".j-comment-like").unbind("click").bind("click",function(){var a=this;if($(this).hasClass("active"))return $.toast({type:"warning",message:"\u672c\u6761\u8bc4\u8bba\u60a8\u5df2\u7ecf\u8d5e\u8fc7~"});$.ajax({url:window.location.href,type:"post",data:"likeup="+$(this).attr("data-coid"),timeout:3E4,cache:!1,success:function(c){/\d/.test(c)&&$(a).find("span").html(c.trim());$.toast({type:"success",message:"\u70b9\u8d5e\u6210\u529f\uff01"});
$(a).addClass("active")}})})};b.prototype.init_dynamic_reply=function(){var a=this,c=$(".j-dynamic-reply");$(document).on("click",function(){return c.hide()});$(".j-comment-reply").unbind("click").bind("click",function(d){d.stopPropagation();$(this).parents("li").find(".j-dynamic-reply").toggle()});c.unbind("click").bind("click",function(d){return d.stopPropagation()});c.off("submit").on("submit",function(d){var e=this;d.preventDefault();if(""===$(this).find("input[name='author']").val().trim())return $.toast({type:"warning",
message:"\u8bf7\u8f93\u5165\u60a8\u7684\u6635\u79f0\uff01"});if(!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test($(this).find("input[name='mail']").val()))return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u6b63\u786e\u7684\u90ae\u7bb1\uff01"});if(""===$(this).find("textarea[name='text']").val().trim())return $.toast({type:"warning",message:"\u8bf7\u8f93\u5165\u56de\u590d\u5185\u5bb9\uff01"});$(this).attr("data-disabled")||($(this).attr("data-disabled",!0),$.ajax({url:$(".j-comment-url").val(),
type:"post",data:$(this).serializeArray(),success:function(k){var f=[],m="";f=$(k).contents();Array.from(f).forEach(function(g){"container"===g.parentNode.className&&(m=g)});if(/TypechoJoeTheme/.test(k)){var h=location.href;h=a.changeURLArg(h,"jscroll","comments");$.toast({type:"success",message:"\u53d1\u9001\u6210\u529f\uff0c\u5373\u5c06\u5237\u65b0\u672c\u9875\uff01"});setTimeout(function(){pjax.loadUrl(h)},a.options.reloadTime)}else $.toast({type:"warning",message:m.textContent||""}),$(e).removeAttr("data-disabled")}}))})};
b.prototype.init_video_album=function(){function a(c,d,e,k){d=void 0===d?1:d;e=void 0===e?1:e;k=void 0===k?.5:k;var f=document.createElement("VIDEO");f.setAttribute("src",c);f.crossOrigin="*";f.currentTime=d;return new Promise(function(m,h){f.addEventListener("loadeddata",function(){var g=document.createElement("canvas");g.width=f.videoWidth*e;g.height=f.videoHeight*e;g.getContext("2d").drawImage(f,0,0,g.width,g.height);m(g.toDataURL("image/webp",k))})})}$(".j-short-video .inner").each(function(c,
d){c=$(d).attr("data-poster");var e=$(d).attr("data-src");isNaN(c)?$(d).css("background-image","url("+c+")"):a(e,c).then(function(k){$(d).css("background-image","url("+k+")")});$(d).unbind("click").bind("click",function(){$("body").css("overflow","hidden");$(".j-video-preview").addClass("active");$(".j-video-preview iframe").attr("src",window.JOE_CONFIG.THEME_URL+"/player.php?url="+e)})});$(".j-video-preview .close").unbind("click").bind("click",function(){$("body").css("overflow","");$(".j-video-preview").removeClass("active")})};
b.prototype.init_wallpaper=function(){if(0!==$("#wallpaper-type").length){$.ajax({url:window.JOE_CONFIG.THEME_URL+"/wallpaperApi.php?cid=360tags",method:"get",dataType:"json",success:function(c){if("0"!==c.errno)return $.toast({type:"warning",message:"\u63a5\u53e3\u5f02\u5e38\uff0c\u8bf7\u8054\u7cfb\u5f00\u53d1\u8005\uff01"});$(".j-wallpaper-load-1").hide();var d='<li data-cid="360new" class="active">\u6700\u65b0\u58c1\u7eb8</li>';c.data.forEach(function(e){d+='<li data-cid="'+e.id+'">'+e.name+"</li>"});
$("#wallpaper-type").html(d);$("#wallpaper-type li").first().click()}});var a=this;$(document).on("click","#wallpaper-type li",function(){$(this).addClass("active").siblings().removeClass("active");a.wallpaper_page=0;a.wallpaper_cid=$(this).attr("data-cid");$("#wallpaper-list").html("");a.init_wallpaper_list()});$("#wallpaper-load").unbind("click").bind("click",function(){a.wallpaper_page+=1;a.init_wallpaper_list()})}};b.prototype.init_wallpaper_list=function(){var a=this;$(".j-wallpaper-load-2").show();
$.ajax({url:window.JOE_CONFIG.THEME_URL+"/wallpaperApi.php",data:{cid:a.wallpaper_cid,start:20*a.wallpaper_page,count:20},method:"get",dataType:"json",success:function(c){$(".j-wallpaper-load-2").hide();0!==c.total?(c.data.forEach(function(d){$("#wallpaper-list").append('\n                                <a class="item" data-fancybox="gallery" href="'+d.url+'">\n                                    <img class="lazyload" src="'+window.JOE_CONFIG.DOCUMENT_LAZY_LOAD+'" data-src="'+d.img_1024_768+'" />\n                                </a>\n                            ')}),
a.init_lazy_load()):$("#wallpaper-load").remove()}})};b.prototype.init_huya_type=function(){if(0!==$(".huya-list-type").length){var a=this;$(".huya-list-type .list ul li").unbind("click").bind("click",function(){window.location.href=a.changeURLArg(window.location.href,"vid",$(this).attr("data-vid"))})}};b.prototype.init_huya_skip=function(){if(0!==$(".huya-list-go-play").length){var a=this;$(".huya-list-go-play").unbind("click").bind("click",function(){var c=a.changeURLArg(window.location.href,"play",
$(this).attr("data-href"));c=a.changeURLArg(c,"title",$(this).attr("data-title"));window.open(c)})}};b.prototype.init_huya_pagination=function(){if(0!==$(".huya-list-pagination").length){var a=this;$(".huya-list-pagination li").on("click",function(){var c=window.location.href;c=a.changeURLArg(c,"pg",$(this).attr("data-pg"));window.location.href=c})}};b.prototype.init_lazy_load=function(){jQuery('[data-fancybox="gallery"]').fancybox()};b.prototype.init_prefer_color_scheme=function(){function a(c){var d=
document.cookie.replace(/(?:(?:^|.*;\s*)night\s*=\s*([^;]*).*$)|^.*$/,"$1");if(d){if("0"===d)return!1;if("1"===d)return!0}else return window.matchMedia&&window.matchMedia("(prefers-color-scheme: "+c+")").matches}!function(){var c;return $jscomp.asyncExecutePromiseGeneratorProgram(function(d){c=document.querySelector(".js-promo-color-modes-toggle");var e;if(e=c)e=(e=document.querySelector("html[data-color-mode]"))?e.getAttribute("data-color-mode"):void 0,e="auto"===e;e&&((e=document.querySelector("html[data-color-mode]"))?
(e=e.getAttribute("data-color-mode"),"auto"===e&&(e=a("dark")?"dark":a("light")?"light":void 0)):e=void 0,"dark"===e&&c.setAttribute("aria-checked","true"));d.jumpToEnd()})}();!function(){return $jscomp.asyncExecutePromiseGeneratorProgram(function(c){document.querySelector(".js-color-mode-settings")&&window.history.replaceState({},document.title,document.URL.split("?")[0]);c.jumpToEnd()})}();this.global_item.color_mode_toggle_btn&&this.global_item.color_mode_toggle_btn.unbind("click").bind("click",
function(c){c=c.currentTarget;var d=!0,e="dark";"true"===c.getAttribute("aria-checked")&&(d=!1,e="light");c.setAttribute("aria-checked",String(d));c=e;d=document.querySelector("html[data-color-mode]");document.cookie="dark"===c?"night=1;path=/":"night=0;path=/";d&&d.setAttribute("data-color-mode",c)})};b.prototype.init_head_title=function(){if(document.querySelector("#post_top_title span")){var a=this.global_item.Jheader,c=$(".above"),d=$(".above .above-nav"),e=$(".below"),k=$("#post_top_title"),
f=!0,m=!0,h=function(){k.addClass("post_no");d.removeClass("post_no");e.slideDown("fast",function(){f=!0})},g=function(){k.removeClass("post_no");d.addClass("post_no");e.slideUp("normal",function(){m=!0})};$(document).ready(function(){var l=0;if(768>screen.width)$(window).scroll(function(){var p=$(window).scrollTop();395<p&&505>p||(450<=p?l>p&&m?(f=!1,c.slideDown("fast",function(){f=!0})):f&&(m=!1,c.slideUp("normal",function(){m=!0})):c.slideDown("fast",function(){f=!0}),l=p)});else{var n=a.offsetWidth;
0<k.length&&750<n&&$(window).scroll(function(){var p=$(window).scrollTop();400<p&&500>p||(450<=p?l>p&&m?(f=!1,h()):f&&(m=!1,g()):h(),l=p)})}})}};b.prototype.init_navigation=function(){$("#siteNav li.nav-list-item").unbind("click").bind("click",function(a){a.preventDefault();$(this).siblings().removeClass("active");$(this).addClass("active");window.scroll({top:$($(this).children("a").attr("href")).offset().top-($(".j-header").height()+20),behavior:"smooth"})})};b.prototype.init_mobinav=function(){$(".navigation-tab-item").bind("click",
function(){$(".navigation-tab-item").removeClass("active");$(this).addClass("active");$(".navigation-tab-overlay").css({left:25*$(this).prevAll().length+"%"})});$("#mob_goTop").click(function(){$("#backToTop").click()});var a=$("#load_mobinav");a.hasClass("active")&&$(".navigation-tab-overlay").css({left:25*a.prevAll().length+"%"})};b.prototype.init_jfloor=function(){function a(){k=[].slice.call(d.querySelectorAll("li"));k=k.map(function(g){var l=g.querySelector("a"),n=document.getElementById(l.getAttribute("data-href").slice(1));
return{listItem:g,anchor:l,target:n}});k=k.filter(function(g){return!!g.target});var m=[],h;k.forEach(function(g,l){var n=g.anchor.offsetLeft-5,p=g.anchor.offsetTop,q=g.anchor.offsetHeight;0===l?(m.push("M",n,p,"L",n,p+q),g.pathStart=0):(h!==n&&m.push("L",h,p),m.push("L",n,p),e.setAttribute("d",m.join(" ")),g.pathStart=e.getTotalLength()||0,m.push("L",n,p+q));h=n;e.setAttribute("d",m.join(" "));g.pathEnd=e.getTotalLength()});f=e.getTotalLength();c()}function c(){var m=window.innerHeight,h=f,g=0,l=
0;k.forEach(function(n){var p=n.target.getBoundingClientRect();p.bottom>0*m&&p.top<1*m?(h=Math.min(n.pathStart,h),g=Math.max(n.pathEnd,g),l+=1,n.listItem.classList.add("visible")):n.listItem.classList.remove("visible")});0<l&&h<g?(e.setAttribute("stroke-dashoffset","1"),e.setAttribute("stroke-dasharray","1, "+h+", "+(g-h)+", "+f),e.setAttribute("opacity",1)):e.setAttribute("opacity",0)}if(0===$("#jFloor").length)return!1;var d=document.querySelector("#jFloor"),e=document.querySelector("#jFloor path"),
k,f;window.addEventListener("resize",a,!1);window.addEventListener("scroll",c,!1);a()};b.prototype.init_resource_page=function(){function a(){$.ajax({url:window.location.href,method:"get",data:{category:c,tag:d,price:e,order:k},success:function(f){f=$(".row.posts-wrapper",f).html();$(".row.posts-wrapper").html(f)}})}var c,d,e,k=null;$(".filter-tag.category li a").unbind("click").bind("click",function(f){f.preventDefault();c=$(this).data("mid");$(this).hasClass("on")&&(c=null);a();$(this).toggleClass("on");
$(".term-bar .term-title").text($(this).text());$(this).parent().siblings("li").find("a").removeClass("on")});$(".filter-tag.tag li a").unbind("click").bind("click",function(f){f.preventDefault();d=$(this).data("mid");$(this).hasClass("on")&&(d=null);a();$(this).toggleClass("on");$(this).parent().siblings("li").find("a").removeClass("on")});$(".filter-tag.price li a").unbind("click").bind("click",function(f){f.preventDefault();e=$(this).data("price");a();$(this).addClass("on");$(this).parent().siblings("li").find("a").removeClass("on")});
$(".filter-tag.order li a").unbind("click").bind("click",function(f){f.preventDefault();k=$(this).data("order");a();$(this).addClass("on");$(this).parent().siblings("li").find("a").removeClass("on")})};"undefined"!==typeof module&&"undefined"!==typeof module.exports?module.exports=b:window.Joe=b})();window.JoeInstance=new Joe({});
